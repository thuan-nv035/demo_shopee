(window.miniJsonp=window.miniJsonp||[]).push([[2],{"0O3H":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.saveDraft=void 0;var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("6SzI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c=(0,o.createActions)({SAVE_DRAFT:function(e){return{conversationId:e.conversationId,draft:e.draft}}}).saveDraft;t.saveDraft=c;var u,i,l=(0,s.default)({},c,(function(e,t){var r=t.payload,a=r.conversationId,s=r.draft,o=e.draftHash;return o[a]=s,(0,n.default)({},e,{draftHash:o})}));t.default=l,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(c,"saveDraft","/workspace/src/reducers/draft/save.js"),u.register(l,"default","/workspace/src/reducers/draft/save.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"0fB8":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.populateMessageRequested=void 0;var a=w(r("QbLZ")),s=w(r("14Xm"));t.getPopulateContent=L,t.populateMessage=G,t.watchPopulate=H;var n,o=r("6SzI"),d=r("5rFJ"),c=r("XnKn"),u=r("vRVn"),i=r("1PJi"),l=r("6JQb"),f=r("OVuk"),p=r("XRLa"),v=r("wyum"),g=r("763i"),h=r("laFX"),m=r("r2BC"),S=r("8TFP"),_=r("4BOJ"),b=r("ob+S");function w(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var M,I,k=s.default.mark(L),x=s.default.mark(G),y=s.default.mark(H),E=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({POPULATE_MESSAGE_REQUESTED:function(e){return{message:e.message}}}).populateMessageRequested);function L(e,t){var r,a,n,o,g,m,S;return s.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=void 0,a=t.id,n=t.shopId,o=t.creatorId,g=t.cartItems,m=t.faqMessageIds,s.t0=e,s.next="product"===s.t0?5:"order"===s.t0?9:"offer"===s.t0?13:"shop"===s.t0?17:"shops"===s.t0?21:s.t0===c.MessageTypes.MSG_TYPE_RATE_CARDS?25:s.t0===c.MessageTypes.MSG_TYPE_VOUCHER_WEB?29:s.t0===c.MessageTypes.MSG_TYPE_VOUCHER?33:s.t0===c.MessageTypes.MSG_TYPE_FEED_STORY?38:s.t0===c.MessageTypes.MSG_TYPE_CART_REMINDER?42:s.t0===c.MessageTypes.MSG_TYPE_ORDER_REVIEW_REMINDER?46:s.t0===c.MessageTypes.MSG_TYPE_FAQ_HISTORY?50:54;break;case 5:return s.next=7,(0,d.call)(u.showProduct,{payload:{productId:a,shopId:n}});case 7:return r=s.sent,s.abrupt("break",54);case 9:return s.next=11,(0,d.call)(i.showOrder,{payload:{orderId:a,shopId:n}});case 11:return r=s.sent,s.abrupt("break",54);case 13:return s.next=15,(0,d.call)(l.showOffer,{payload:{offerId:a,shopId:n}});case 15:return r=s.sent,s.abrupt("break",54);case 17:return s.next=19,(0,d.call)(f.showShop,{payload:{shopId:n}});case 19:return r=s.sent,s.abrupt("break",54);case 21:return s.next=23,(0,d.call)(f.showShop,{payload:{shopId:t}});case 23:return r=s.sent,s.abrupt("break",54);case 25:return s.next=27,(0,d.call)(v.showRateCard,{shopId:n,ids:a});case 27:return r=s.sent,s.abrupt("break",54);case 29:return s.next=31,(0,d.call)(_.showVoucher,{shopId:n,ids:a});case 31:return r=s.sent,s.abrupt("break",54);case 33:return s.next=35,(0,d.call)(_.showVoucher,{shopId:n,ids:Array.isArray(a)?a:[a]});case 35:return S=s.sent,r=S[0],s.abrupt("break",54);case 38:return s.next=40,(0,d.call)(h.showFeedStory,{payload:{id:a,creatorId:o}});case 40:return r=s.sent,s.abrupt("break",54);case 42:return s.next=44,(0,d.call)(p.showCartReminder,{id:a,cartItems:g});case 44:return r=s.sent,s.abrupt("break",54);case 46:return s.next=48,(0,d.call)(i.showUnrateOrder,{payload:{orderId:a,shopId:n}});case 48:return r=s.sent,s.abrupt("break",54);case 50:return s.next=52,(0,d.call)(b.showFaqHistory,{payload:{ids:m.slice(0,3),id:a}});case 52:return r=s.sent,s.abrupt("break",54);case 54:return s.abrupt("return",{type:e,content:r});case 55:case"end":return s.stop()}}),k,this)}function G(e){var t,r,n=e.payload.message;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.put)((0,g.updateRecord)({name:"messages",id:n.id,record:{fetchStatus:""}}));case 2:return e.next=4,(0,d.select)(S.isSubAccountSelector);case 4:return t=e.sent,e.next=7,(0,d.select)(S.currentUserShopIdSelector);case 7:return r=e.sent,e.next=10,(0,d.call)(m.populateMessageWithSourceAndContent,[n],r,t);case 10:return e.next=12,(0,d.put)((0,g.updateRecord)({name:"messages",id:n.id,record:(0,a.default)({},n)}));case 12:case"end":return e.stop()}}),x,this)}function H(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(E,G);case 2:case"end":return e.stop()}}),y,this)}t.populateMessageRequested=E,(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(M.register(E,"populateMessageRequested","/workspace/src/reducers/message/populate.js"),M.register(L,"getPopulateContent","/workspace/src/reducers/message/populate.js"),M.register(G,"populateMessage","/workspace/src/reducers/message/populate.js"),M.register(H,"watchPopulate","/workspace/src/reducers/message/populate.js")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)}).call(this,r("YuTi")(e))},"1JFN":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resendMessageRequested=void 0;var a,s=r("14Xm"),n=(a=s)&&a.__esModule?a:{default:a};t.watchResend=h;var o,d=r("6SzI"),c=r("5rFJ"),u=r("bqMa");(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var i,l,f=n.default.mark(g),p=n.default.mark(h),v=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,d.createActions)({RESEND_MESSAGE_REQUESTED:function(e){return{conversationId:e.conversationId,message:e.message}}}).resendMessageRequested);function g(e){var t=e.payload,r=t.conversationId,a=t.message;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.sendMessages)({conversationId:r,requestIds:[a.request_id],messages:[a]});case 2:case"end":return e.stop()}}),f,this)}function h(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeEvery)(v,g);case 2:case"end":return e.stop()}}),p,this)}t.resendMessageRequested=v,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(v,"resendMessageRequested","/workspace/src/reducers/message/resend.js"),i.register(g,"resendMessageRequestedSaga","/workspace/src/reducers/message/resend.js"),i.register(h,"watchResend","/workspace/src/reducers/message/resend.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,r("YuTi")(e))},"3hjT":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateConversationListsHash=void 0;var a,s=c(r("YEIV")),n=c(r("QbLZ")),o=r("6SzI"),d=c(r("xk4V"));function c(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=(0,o.createActions)({UPDATE_CONVERSATION_LISTS_HASH:function(){return{}}}).updateConversationListsHash;t.updateConversationListsHash=u;var i,l,f=(0,s.default)({},u,(function(e){return(0,n.default)({},e,{listsHash:(0,d.default)()})}));t.default=f,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"updateConversationListsHash","/workspace/src/reducers/conversation/update.js"),i.register(f,"default","/workspace/src/reducers/conversation/update.js")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,r("YuTi")(e))},"4fYm":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.markMessagesSucceed=t.markMessagesRequested=void 0;var a=g(r("YEIV")),s=g(r("14Xm")),n=g(r("QbLZ")),o=g(r("gDS+"));t.markMessagesRequestedSaga=w,t.watchMark=M;var d,c=r("6SzI"),u=r("5rFJ"),i=g(r("jtha")),l=r("ZGUL"),f=r("WNYn"),p=r("9jhx"),v=r("763i");function g(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var h=s.default.mark(w),m=s.default.mark(M),S=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,c.createActions)({MARK_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId,shopId:e.shopId,unreadCount:e.unreadCount}},MARK_MESSAGES_SUCCEED:function(e){return{conversationId:e.conversationId,markType:e.markType}}})),_=S.markMessagesRequested,b=S.markMessagesSucceed;function w(e){var t,r,a,d,c,g,m=e.payload,S=m.conversationId,_=m.isRead,w=m.latestMessageId,M=m.shopId;m.unreadCount;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=_?"read":"unread",r=_?{last_read_message_id:w}:{},M&&(r.shop_id=M),e.next=6,(0,u.call)(i.default,{method:"PUT",parent:"conversations",parentId:S,resource:t,payload:(0,o.default)((0,n.default)({},r))});case 6:if(!_){e.next=24;break}return e.next=9,(0,u.select)((function(e){return e.conversationReducer}));case 9:return a=e.sent,d=a.conversationMark,c="socket"===d[S],e.next=14,(0,u.put)(b({conversationId:S,markType:c?"":"api"}));case 14:if(c){e.next=24;break}return e.next=17,(0,u.select)((0,f.getConversation)(S));case 17:if(g=e.sent,!g.unread_count){e.next=24;break}return e.next=22,(0,u.put)((0,v.updateRecord)({name:"conversations",id:S,record:{last_read_message_id:w,unread_count:0}}));case 22:return e.next=24,(0,u.put)((0,p.updateUnreadCount)({type:p.unreadCountActions.MARK_AS_READ,conversation:g}));case 24:e.next=30;break;case 26:return e.prev=26,e.t0=e.catch(0),e.next=30,(0,u.put)((0,l.showOperationFailureToastRequested)({error:e.t0}));case 30:case"end":return e.stop()}}),h,this,[[0,26]])}function M(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeEvery)(_,w);case 2:case"end":return e.stop()}}),m,this)}t.markMessagesRequested=_,t.markMessagesSucceed=b;var I,k,x=(0,a.default)({},b,(function(e,t){var r=t.payload,s=r.conversationId,o=r.markType;return(0,n.default)({},e,{conversationMark:(0,n.default)({},e.conversationMark,(0,a.default)({},s,o))})}));t.default=x,(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(_,"markMessagesRequested","/workspace/src/reducers/conversation/mark.js"),I.register(b,"markMessagesSucceed","/workspace/src/reducers/conversation/mark.js"),I.register(w,"markMessagesRequestedSaga","/workspace/src/reducers/conversation/mark.js"),I.register(M,"watchMark","/workspace/src/reducers/conversation/mark.js"),I.register(x,"default","/workspace/src/reducers/conversation/mark.js")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)}).call(this,r("YuTi")(e))},"4qdM":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resendOfflineMessagesOnceSucceed=t.resendOfflineMessagesOnce=t.resetMessagesFailedByOffline=t.sendMessagesFailedByOffline=void 0;var a,s=S(r("YEIV")),n=S(r("jWXv")),o=S(r("m1cH")),d=S(r("QbLZ")),c=S(r("FyfS")),u=S(r("14Xm")),i=S(r("sk9p")),l=S(r("oF3Q"));t.resendOfflineMessagesOnceSaga=E,t.updateResendConversationMessage=L,t.watchOffline=G;var f,p=r("6SzI"),v=r("5rFJ"),g=r("wNa6"),h=r("bqMa"),m=r("0VV5");function S(e){return e&&e.__esModule?e:{default:e}}(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&f(e);var _=u.default.mark(E),b=u.default.mark(L),w=u.default.mark(G),M=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,p.createActions)({SEND_MESSAGES_FAILED_BY_OFFLINE:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},RESET_MESSAGES_FAILED_BY_OFFLINE:function(){return{}},RESEND_OFFLINE_MESSAGES_ONCE:function(){return{}},RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}}})),I=M.sendMessagesFailedByOffline,k=M.resetMessagesFailedByOffline,x=M.resendOfflineMessagesOnce,y=M.resendOfflineMessagesOnceSucceed;function E(){var e,t,r,a,s,n,o,d,f,p,g,S,b,w,M,I,x=this;return u.default.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,v.select)(m.offlineMessagesSelector);case 2:e=_.sent,t=(0,l.default)(e),r=[],a=u.default.mark((function e(t){var a,s,n,o,d;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,i.default)(t,2),s=a[0],n=a[1],e.next=3,(0,v.select)((0,m.getMessagesSelector)(n));case 3:o=e.sent,d=n.map((function(e,t){return{conversationId:s,requestIds:[e],messages:[o[t]]}})).filter((function(e){return e.messages[0]})),r=r.concat(d);case 6:case"end":return e.stop()}}),e,x)})),s=!0,n=!1,o=void 0,_.prev=9,d=(0,c.default)(t);case 11:if(s=(f=d.next()).done){_.next=17;break}return p=f.value,_.delegateYield(a(p),"t0",14);case 14:s=!0,_.next=11;break;case 17:_.next=23;break;case 19:_.prev=19,_.t1=_.catch(9),n=!0,o=_.t1;case 23:_.prev=23,_.prev=24,!s&&d.return&&d.return();case 26:if(_.prev=26,!n){_.next=29;break}throw o;case 29:return _.finish(26);case 30:return _.finish(23);case 31:g=!0,S=!1,b=void 0,_.prev=34,w=(0,c.default)(r);case 36:if(g=(M=w.next()).done){_.next=45;break}return I=M.value,_.next=40,(0,h.sendMessages)(I);case 40:return _.next=42,(0,v.delay)(400);case 42:g=!0,_.next=36;break;case 45:_.next=51;break;case 47:_.prev=47,_.t2=_.catch(34),S=!0,b=_.t2;case 51:_.prev=51,_.prev=52,!g&&w.return&&w.return();case 54:if(_.prev=54,!S){_.next=57;break}throw b;case 57:return _.finish(54);case 58:return _.finish(51);case 59:return _.next=61,(0,v.put)(k());case 61:case"end":return _.stop()}}),_,this,[[9,19,23,31],[24,,26,30],[34,47,51,59],[52,,54,58]])}function L(e){var t=e.conversationId,r=e.messageIds;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.put)(y({conversationId:t,messageIds:r}));case 2:case"end":return e.stop()}}),b,this)}function G(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.takeEvery)(x,E);case 2:case"end":return e.stop()}}),w,this)}t.sendMessagesFailedByOffline=I,t.resetMessagesFailedByOffline=k,t.resendOfflineMessagesOnce=x,t.resendOfflineMessagesOnceSucceed=y,window.addEventListener("judge-online",(function(){g.store.dispatch(x())}));var H,R,T=(a={},(0,s.default)(a,I,(function(e,t){var r=t.payload,a=r.conversationId,c=r.requestIds,u=e.offlineMessages,i=(u[a]||[]).concat(c);return(0,d.default)({},e,{offlineMessages:(0,d.default)({},u,(0,s.default)({},a,[].concat((0,o.default)(new n.default(i)))))})})),(0,s.default)(a,k,(function(e){return(0,d.default)({},e,{offlineMessages:{}})})),(0,s.default)(a,y,(function(e,t){var r=t.payload,a=r.conversationId,n=r.messageIds,o=e.messageIdsHash,c=o[a]||{},u=(c.all||[]).filter((function(e){return!n.includes(e)})),i=(c.failed||[]).filter((function(e){return!n.includes(e)})),l=(c.sending||[]).filter((function(e){return!n.includes(e)}));return(0,d.default)({},e,{messageIdsHash:(0,d.default)({},o,(0,s.default)({},a,(0,d.default)({},c,{all:u,failed:i,sending:l})))})})),a);t.default=T,(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(I,"sendMessagesFailedByOffline","/workspace/src/reducers/message/offline.js"),H.register(k,"resetMessagesFailedByOffline","/workspace/src/reducers/message/offline.js"),H.register(x,"resendOfflineMessagesOnce","/workspace/src/reducers/message/offline.js"),H.register(y,"resendOfflineMessagesOnceSucceed","/workspace/src/reducers/message/offline.js"),H.register(E,"resendOfflineMessagesOnceSaga","/workspace/src/reducers/message/offline.js"),H.register(L,"updateResendConversationMessage","/workspace/src/reducers/message/offline.js"),H.register(G,"watchOffline","/workspace/src/reducers/message/offline.js"),H.register(T,"default","/workspace/src/reducers/message/offline.js")),(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&R(e)}).call(this,r("YuTi")(e))},"5jgR":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.handleSenstiveUrl=void 0;var a,s=r("14Xm"),n=(a=s)&&a.__esModule?a:{default:a};t.watchHandle=m;var o,d=r("6SzI"),c=r("5rFJ"),u=r("FsNy"),i=r("wNa6");(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var l,f,p=n.default.mark(h),v=n.default.mark(m),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,d.createActions)({HANDLE_SENSTIVE_URL:function(e){return{href:e.href}}}).handleSenstiveUrl);function h(e){var t=e.payload.href;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.put)((0,u.showModal)({type:"CONFIRM_MODAL",title:{key:"common.navigation.cofirm_titile"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){i.store.dispatch((0,u.closeModal)())}},confirm:{label:{key:"common.navigation.confirm"},handler:function(){i.store.dispatch((0,u.closeModal)()),window.open(t,"_blank")}}},additions:{content:{key:"common.navigation.cofirm_content"},modalStyle:{width:"352px"},contentStyle:{paddingTop:"8px",paddingBottom:"13px"}}}));case 2:case"end":return e.stop()}}),p,this)}function m(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeEvery)(g,h);case 2:case"end":return e.stop()}}),v,this)}t.handleSenstiveUrl=g,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(g,"handleSenstiveUrl","/workspace/src/reducers/message/handle.js"),l.register(h,"handleSenstiveUrlSaga","/workspace/src/reducers/message/handle.js"),l.register(m,"watchHandle","/workspace/src/reducers/message/handle.js")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,r("YuTi")(e))},"5rLn":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getConversationDetailRequested=void 0;var a=p(r("14Xm"));t.getConversationDetailRequestedSaga=_,t.watchDetail=b;var s,n=r("6SzI"),o=r("5rFJ"),d=p(r("rN3q")),c=p(r("jtha")),u=r("763i"),i=r("tpro"),l=r("WNYn"),f=r("4fYm");function p(e){return e&&e.__esModule?e:{default:e}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);var v,g,h=a.default.mark(_),m=a.default.mark(b),S=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,n.createActions)({GET_CONVERSATION_DETAIL_REQUESTED:function(e){return{conversationId:e.conversationId,shopId:e.shopId,needRead:e.needRead}}}).getConversationDetailRequested);function _(e){var t,r,s,n,p,v,g,m,S=e.payload,_=S.conversationId,b=S.shopId,w=S.needRead;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.call)(c.default,{resource:"conversations",id:_,params:{shop_id:b}});case 3:return t=e.sent,e.t0=(0,l.getConversation)(_),e.next=7,(0,o.select)((function(e){return e}));case 7:if(e.t1=e.sent,(0,e.t0)(e.t1).id){e.next=15;break}return r=(0,d.default)("conversations",t),s=r.entities,e.next=13,(0,o.put)((0,i.updateEntities)({entities:s}));case 13:e.next=18;break;case 15:return n=t.unread_count,p=t.flag,e.next=18,(0,o.put)((0,u.updateRecord)({name:"conversations",id:_,record:{unread_count:n,flag:p}}));case 18:if(!w){e.next=23;break}if(v=t.unread_count,g=t.latest_message_id,m=t.shop_id,!(v>0)){e.next=23;break}return e.next=23,(0,o.put)((0,f.markMessagesRequested)({conversationId:_,isRead:!0,latestMessageId:g,shopId:m,unreadCount:v}));case 23:return e.abrupt("return",t);case 26:return e.prev=26,e.t2=e.catch(0),e.abrupt("return",{});case 29:case"end":return e.stop()}}),h,this,[[0,26]])}function b(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.takeEvery)(S,_);case 2:case"end":return e.stop()}}),m,this)}t.getConversationDetailRequested=S,(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(S,"getConversationDetailRequested","/workspace/src/reducers/conversation/detail.js"),v.register(_,"getConversationDetailRequestedSaga","/workspace/src/reducers/conversation/detail.js"),v.register(b,"watchDetail","/workspace/src/reducers/conversation/detail.js")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)}).call(this,r("YuTi")(e))},"6RWM":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,s=c(r("QbLZ")),n=c(r("tpro")),o=c(r("763i")),d=r("6SzI");function c(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,i,l=(0,d.handleActions)((0,s.default)({},n.default,o.default),{users:{},messages:{},conversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},messageShortcuts:{},persist:null});t.default=l,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(l,"default","/workspace/src/reducers/entity/index.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"763i":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.batchUpdateRecord=t.deleteRecord=t.updateRecord=void 0;var a,s=f(r("GQeE")),n=f(r("YEIV")),o=f(r("QbLZ")),d=f(r("14Xm"));t.updateRecordSaga=_,t.watchUpdate=b;var c,u=r("5rFJ"),i=r("6SzI"),l=r("3hjT");function f(e){return e&&e.__esModule?e:{default:e}}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&c(e);var p=d.default.mark(_),v=d.default.mark(b),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,i.createActions)({UPDATE_RECORD:function(e){return{name:e.name,id:e.id,record:e.record}},DELETE_RECORD:function(e){return{name:e.name,id:e.id}},BATCH_UPDATE_RECORD:function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}}})),h=g.updateRecord,m=g.deleteRecord,S=g.batchUpdateRecord;function _(e){var t=e.payload,r=t.name,a=t.id,s=t.record;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("conversations"!==r){e.next=3;break}return e.next=3,(0,u.put)((0,l.updateConversationListsHash)());case 3:return e.next=5,(0,u.put)(h({name:r,id:a,record:s}));case 5:case"end":return e.stop()}}),p,this)}function b(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeEvery)(h,_);case 2:case"end":return e.stop()}}),v,this)}t.updateRecord=h,t.deleteRecord=m,t.batchUpdateRecord=S;var w,M,I=(a={},(0,n.default)(a,h,(function(e,t){var r=t.payload,a=r.name,s=r.id,d=r.record;return(0,o.default)({},e,(0,n.default)({},a,(0,o.default)({},e[a],(0,n.default)({},s,(0,o.default)({},e[a][s],d)))))})),(0,n.default)(a,m,(function(e,t){var r=t.payload,a=r.name,s=r.id,d=e[a];return delete d[s],(0,o.default)({},e,(0,n.default)({},a,d))})),(0,n.default)(a,S,(function(e,t){var r=t.payload,a=r.name,d=r.records,c=r.checkProp,u=(0,o.default)({},e[a]);return(0,s.default)(d).forEach((function(e){(!c||c&&d[e][c]>u[e][c])&&(u[e]=(0,o.default)({},u[e],d[e]))})),(0,o.default)({},e,(0,n.default)({},a,u))})),a);t.default=I,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(h,"updateRecord","/workspace/src/reducers/entity/record.js"),w.register(m,"deleteRecord","/workspace/src/reducers/entity/record.js"),w.register(S,"batchUpdateRecord","/workspace/src/reducers/entity/record.js"),w.register(_,"updateRecordSaga","/workspace/src/reducers/entity/record.js"),w.register(b,"watchUpdate","/workspace/src/reducers/entity/record.js"),w.register(I,"default","/workspace/src/reducers/entity/record.js")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)}).call(this,r("YuTi")(e))},"7nv7":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.fakeConversationSucceeded=void 0;var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("6SzI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c=(0,o.createActions)({FAKE_CONVERSATION_SUCCEEDED:function(e){return{conversationId:e.conversationId}}}).fakeConversationSucceeded;t.fakeConversationSucceeded=c;var u,i,l=(0,s.default)({},c,(function(e,t){var r=t.payload.conversationId;return(0,n.default)({},e,{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));t.default=l,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(c,"fakeConversationSucceeded","/workspace/src/reducers/conversation/fake.js"),u.register(l,"default","/workspace/src/reducers/conversation/fake.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"8Ryq":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateConversationTimestamp=t.updateFetchConversationsDirection=t.updateFetchConversationsStatus=t.fetchConversationsSucceeded=t.fetchConversationsRequested=void 0;var a,s=E(r("YEIV")),n=E(r("14Xm")),o=E(r("m1cH")),d=E(r("P2sY")),c=E(r("jWXv")),u=E(r("rfXi")),i=E(r("QbLZ")),l=E(r("sk9p")),f=E(r("gDS+")),p=E(r("4d7F"));t.fetchConversationsRequestedSaga=D,t.watchSubFetch=U;var v,g=E(r("jtha")),h=E(r("b/qR")),m=r("6SzI"),S=r("5rFJ"),_=r("WNYn"),b=r("gXnt"),w=r("UfXg"),M=r("8TFP"),I=r("Gld0"),k=r("0VV5"),x=r("Q8fy"),y=E(r("kiXb"));function E(e){return e&&e.__esModule?e:{default:e}}(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&v(e);var L=n.default.mark(D),G=n.default.mark(U),H=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,m.createActions)({FETCH_CONVERSATIONS_REQUESTED:function(e){var t=e.direction,r=void 0===t?"reset":t,a=e.shopId,s=void 0===a?null:a,n=e.noPending;return{direction:r,shopId:s,noPending:void 0!==n&&n,triggerBySync:e.triggerBySync}},FETCH_CONVERSATIONS_SUCCEEDED:function(e){var t=e.conversationIds,r=e.conversationIdsMap,a=e.oldestReceivedMessageId,s=e.latestReceivedMessageId,n=e.oldestTimestampNano,o=e.latestTimestampNano,d=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestReceivedMessageId:a,latestReceivedMessageId:s,direction:void 0===d?"reset":d,status:e.status,hasMore:e.hasMore,latestTimestampNano:o,oldestTimestampNano:n,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException}},UPDATE_FETCH_CONVERSATIONS_STATUS:function(e){return{status:e.status}},UPDATE_FETCH_CONVERSATIONS_DIRECTION:function(e){return{direction:e.direction}},UPDATE_CONVERSATION_TIMESTAMP:function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}}})),R=H.fetchConversationsRequested,T=H.fetchConversationsSucceeded,C=H.updateFetchConversationsStatus,j=H.updateFetchConversationsDirection,q=H.updateConversationTimestamp;t.fetchConversationsRequested=R,t.fetchConversationsSucceeded=T,t.updateFetchConversationsStatus=C,t.updateFetchConversationsDirection=j,t.updateConversationTimestamp=q;var F=function(e,t,r,a){var s={},n="older"===e?t:"latest"===e?r:"";return s.resource="conversations",s.resource="pinned"===a?"conversation/list":"conversations",s.params={next_timestamp_nano:n,direction:"latest"===e&&n?"latest":"older"},"unread"===a&&(s.params.unread_only=!0),"pinned"===a&&(s.params.type=a,s.version="v1.2"),new p.default((function(e,t){(0,g.default)(s).then((function(t){var r=t.conversations,a=void 0===r?[]:r,s=t.page_result;e([a,void 0===s?{}:s])})).catch((function(e){t(e)}))}))},A=function(e,t,r,a,s,n){var o="older"===t?r:"latest"===t?a:"",d={direction:"latest"===t?"latest":"older"};if(o&&(d.last_received_message_id=o),n)return e&&(d.shop_id=e),s&&["unread","pinned"].includes(s)&&(d.type=s),new p.default((function(e,t){(0,g.default)({parent:"subaccount",resource:"conversations",params:d}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},O=function(e){return new p.default((function(t){(0,g.default)({parent:"setting",resource:"auto_translations",params:{shop_ids:(0,f.default)(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))},N=function(e,t){e.sort((function(e,t){return t.latest_message_id-e.latest_message_id}));var r=e[0],a=r.last_message_time_nano,s=r.next_timestamp_nano;return t&&!s&&(s=t.next_message_time_nano),{nextTimestampNano:s,oldestTimestampNano:s,latestTimestampNano:a}};function D(e){var t,r,a,s,f,p,v,g,m,E,G,H,j,q,D,U,P,Y,Q,V,B,X,W,z,Z,J,K,$,ee,te,re,ae,se,ne,oe,de,ce,ue,ie,le,fe,pe,ve,ge,he,me,Se,_e,be,we,Me,Ie=e.payload,ke=Ie.direction,xe=Ie.shopId,ye=Ie.noPending,Ee=Ie.triggerBySync;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.select)(M.isSubAccountSelector);case 2:return t=e.sent,e.next=5,(0,S.select)(M.isScChatSelector);case 5:return r=e.sent,e.next=8,(0,S.select)(_.filterSelector);case 8:if(a=e.sent.toLowerCase(),s=!t&&["all","unread","pinned"].includes(a),"reset"!==ke){e.next=13;break}return e.next=13,(0,S.put)(T({conversationIds:[],oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:h.default.SUCCEED,persist:null,shouldFetchByTimestamp:s}));case 13:return e.next=15,(0,S.select)((function(e){return e.conversationReducer}));case 15:if(f=e.sent,p=f.oldestTimestampNano,v=f.latestTimestampNano,g=f.maxLatestTimestampNano,m=f.oldestReceivedMessageId,E=f.latestReceivedMessageId,G=f.maxLatestReceivedMessageId,H=f.hasMore,j=f.persist,q=f.conversationIds,D=f.status,U=f.syncFetchException,P="reset"===ke||(s?!p:!m)&&"older"===ke,e.prev=28,"older"===ke&&(s?"0"===p:!H)){e.next=148;break}if(ye){e.next=33;break}return e.next=33,(0,S.put)(C({status:P?h.default.INIT_PENDING:h.default.PENDING}));case 33:if(Y=[],Q={},!s){e.next=44;break}return e.next=38,(0,S.call)(F,ke,p,v,a);case 38:V=e.sent,B=(0,l.default)(V,2),Y=B[0],Q=B[1],e.next=47;break;case 44:return e.next=46,(0,S.call)(A,xe,ke,m,E,a,t);case 46:Y=e.sent;case 47:if(!(X=Y.length)){e.next=144;break}if(!("reset"!==ke||s&&"pinned"!==a)){e.next=61;break}if(W=Y[X-1],z="older"===ke,Z=void 0,J=void 0,s?(Z=z?p:v,J=z?W.next_timestamp_nano:W.last_message_time_nano):(Z=z?m:E,J=W.latest_message_id),!Z||!J){e.next=61;break}if(z?J<Z:J>Z){e.next=61;break}return e.next=60,(0,S.put)(T({direction:ke,status:h.default.SUCCEED,hasMore:"latest"===ke,persist:j,oldestReceivedMessageId:m,latestReceivedMessageId:E,maxLatestReceivedMessageId:E,conversationIds:q,oldestTimestampNano:p,latestTimestampNano:v,maxLatestTimestampNano:v,shouldFetchByTimestamp:s}));case 60:return e.abrupt("return");case 61:if(Y=Y.map((function(e){return"censored_blacklist"===e.last_message_state?(0,i.default)({},e,{latestMessageStatus:"failed",latestMessage:{type:"text",content:{text:y.default.t("common.blacklist.replaced_text")}}}):e})),r||t){e.next=72;break}return e.next=65,(0,S.select)(I.autoTranslation);case 65:if("enabled"===e.sent){e.next=72;break}return K=(0,u.default)(new c.default(Y.map((function(e){return e.to_shop_id})))),e.next=70,(0,S.call)(O,K);case 70:$=e.sent,Y=Y.map((function(e){var t=$.find((function(t){return t.shop_id===e.to_shop_id}));return(0,i.default)({},e,{translationAccess:!!t&&t.is_auto_translation})}));case 72:if(ee={},Y.forEach((function(e){ee[e.id]=!0})),te={status:h.default.SUCCEED,direction:ke,conversationIdsMap:ee,shouldFetchByTimestamp:s},re=N(Y,Q.next_cursor),!s){e.next=91;break}return ae=re.oldestTimestampNano,se=re.latestTimestampNano,e.next=80,(0,S.select)((function(e){return e.conversationReducer}));case 80:return ne=e.sent,oe=ne.conversationIds,de=ne.persist,e.next=85,(0,S.call)(w.saveToStore,Y,oe,de,ke);case 85:ce=e.sent,ue=ce.persistObj,ie=ce.resultConversationIds,te=(0,d.default)({},te,{oldestTimestampNano:ae,latestTimestampNano:se,persist:ue,conversationIds:ie,maxLatestTimestampNano:!g||g<se?se:g}),e.next=110;break;case 91:if(le=new Date(Y[0].last_message_time).getTime()/1e3,fe=void 0,!t){e.next=104;break}return pe=[],Y.forEach((function(e){pe.push(e.shop_id)})),e.next=98,(0,S.call)(b.fetchShopsByIds,{shopIds:[].concat((0,o.default)(new c.default(pe)))});case 98:return ve=e.sent,e.next=101,(0,S.call)(w.saveToStore,Y,q,j,ke,ve);case 101:fe=e.sent,e.next=107;break;case 104:return e.next=106,(0,S.call)(w.saveToStore,Y,q,j,ke);case 106:fe=e.sent;case 107:ge=Y[0].latest_message_id,he=Y[X-1].latest_message_id,te=(0,d.default)({},te,{hasMore:!0,latestTimestamp:le,conversationIdsMap:ee,persist:fe.persistObj,oldestReceivedMessageId:he,latestReceivedMessageId:ge,maxLatestReceivedMessageId:!G||G<ge?ge:G,conversationIds:fe.resultConversationIds});case 110:if(!Ee){e.next=124;break}return e.next=113,(0,S.select)(_.currentConversationIdSelector);case 113:if(!(me=e.sent)||!ee[me]){e.next=124;break}return Se=Y.find((function(e){return e.id===me})),_e=(Se||{}).latest_message_id,e.next=119,(0,S.select)(k.messagesWithSourceSelector);case 119:if(be=e.sent,we=be.length?be[be.length-1].id:"",_e===we){e.next=124;break}return e.next=124,(0,S.put)((0,x.fetchMessagesRequested)({conversation:Se,reset:!0}));case 124:return e.next=126,(0,S.put)(T(te));case 126:if("latest"!==ke){e.next=139;break}if(!s){e.next=135;break}if(Me=re.nextTimestampNano,e.t0="0"!==Me,!e.t0){e.next=133;break}return e.next=133,(0,S.put)(R({direction:ke,noPending:!0}));case 133:e.next=137;break;case 135:return e.next=137,(0,S.put)(R({direction:ke,shopId:xe,noPending:!0}));case 137:e.next=142;break;case 139:if(!(te.conversationIds.length<=20)){e.next=142;break}return e.next=142,(0,S.put)(R({direction:"older",shopId:xe,noPending:!0}));case 142:e.next=146;break;case 144:return e.next=146,(0,S.put)(T({direction:ke,status:h.default.SUCCEED,hasMore:"latest"===ke,persist:j,oldestReceivedMessageId:m,latestReceivedMessageId:E,maxLatestReceivedMessageId:G,conversationIds:q,oldestTimestampNano:p,latestTimestampNano:v,maxLatestTimestampNano:g,shouldFetchByTimestamp:s,syncFetchException:Ee?U+1:0}));case 146:e.next=151;break;case 148:if(D===h.default.INIT_FAILED){e.next=151;break}return e.next=151,(0,S.put)(C({status:h.default.SUCCEED}));case 151:e.next=157;break;case 153:return e.prev=153,e.t1=e.catch(28),e.next=157,(0,S.put)(C({status:P?h.default.INIT_FAILED:h.default.FAILED}));case 157:case"end":return e.stop()}}),L,this,[[28,153]])}function U(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.takeEvery)(R,D);case 2:case"end":return e.stop()}}),G,this)}var P,Y,Q=(a={},(0,s.default)(a,T,(function(e,t){var r=t.payload,a=r.conversationIds,s=r.conversationIdsMap,n=void 0===s?{}:s,o=r.oldestReceivedMessageId,d=r.latestReceivedMessageId,c=r.direction,u=void 0===c?"reset":c,l=r.status,f=r.hasMore,p=r.latestTimestamp,v=void 0===p?-1:p,g=r.oldestTimestampNano,h=r.latestTimestampNano,m=r.persist,S=r.shouldFetchByTimestamp,_=r.maxLatestReceivedMessageId,b=r.maxLatestTimestampNano,w=r.syncFetchException,M=void 0===w?0:w,I=(0,i.default)({},e,{status:l,hasMore:f,persist:m,conversationIds:a,conversationIdsMap:"reset"===u?n:(0,i.default)({},e.conversationIdsMap,n),latestTimestamp:v>e.latestTimestamp?v:e.latestTimestamp,direction:"latest"===u?u:"older",maxLatestReceivedMessageId:_,maxLatestTimestampNano:b,syncFetchException:M});switch(u){case"reset":S?(I.latestTimestampNano=h,I.oldestTimestampNano=g):(I.oldestReceivedMessageId=o,I.latestReceivedMessageId=d);break;case"latest":S?I.latestTimestampNano=h>e.latestTimestampNano?h:e.latestTimestampNano:I.latestReceivedMessageId=d;break;case"older":S?I.oldestTimestampNano=g:I.oldestReceivedMessageId=o}return I})),(0,s.default)(a,C,(function(e,t){var r=t.payload.status;return(0,i.default)({},e,{status:r})})),(0,s.default)(a,j,(function(e,t){var r=t.payload.direction;return(0,i.default)({},e,{direction:r})})),(0,s.default)(a,q,(function(e,t){var r=t.payload,a=r.latestTimestampNano,s=r.oldestTimestampNano;return(0,i.default)({},e,{latestTimestampNano:a,oldestTimestampNano:s})})),a);t.default=Q,(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(P.register(R,"fetchConversationsRequested","/workspace/src/reducers/conversation/subFetch.js"),P.register(T,"fetchConversationsSucceeded","/workspace/src/reducers/conversation/subFetch.js"),P.register(C,"updateFetchConversationsStatus","/workspace/src/reducers/conversation/subFetch.js"),P.register(j,"updateFetchConversationsDirection","/workspace/src/reducers/conversation/subFetch.js"),P.register(q,"updateConversationTimestamp","/workspace/src/reducers/conversation/subFetch.js"),P.register(F,"fetchConversationsByTimestamp","/workspace/src/reducers/conversation/subFetch.js"),P.register(A,"fetchConversationsByMessageId","/workspace/src/reducers/conversation/subFetch.js"),P.register(O,"getTranslationAccess","/workspace/src/reducers/conversation/subFetch.js"),P.register(N,"getTimestamp","/workspace/src/reducers/conversation/subFetch.js"),P.register(D,"fetchConversationsRequestedSaga","/workspace/src/reducers/conversation/subFetch.js"),P.register(U,"watchSubFetch","/workspace/src/reducers/conversation/subFetch.js"),P.register(Q,"default","/workspace/src/reducers/conversation/subFetch.js")),(Y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Y(e)}).call(this,r("YuTi")(e))},"9vGo":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.pinConversationRequested=void 0;var a=i(r("14Xm")),s=i(r("gDS+"));t.pinConversationRequestedSaga=h,t.watchPin=m;var n,o=r("6SzI"),d=r("5rFJ"),c=i(r("jtha")),u=r("ZGUL");function i(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var l,f,p=a.default.mark(h),v=a.default.mark(m),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({PIN_CONVERSATION_REQUESTED:function(e){return{conversationId:e.conversationId,shopId:e.shopId,isPinned:e.isPinned}}}).pinConversationRequested);function h(e){var t,r=e.payload,n=r.conversationId,o=r.shopId,i=r.isPinned;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"PUT",parent:"conversations",parentId:n,resource:i?"unpin":"pin",version:"v1.2"},o&&(t.payload=(0,s.default)({shop_id:o})),e.next=5,(0,d.call)(c.default,t);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,(0,d.put)((0,u.showOperationFailureToastRequested)({error:e.t0}));case 11:case"end":return e.stop()}}),p,this,[[0,7]])}function m(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(g,h);case 2:case"end":return e.stop()}}),v,this)}t.pinConversationRequested=g,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(g,"pinConversationRequested","/workspace/src/reducers/conversation/pin.js"),l.register(h,"pinConversationRequestedSaga","/workspace/src/reducers/conversation/pin.js"),l.register(m,"watchPin","/workspace/src/reducers/conversation/pin.js")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,r("YuTi")(e))},I45U:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateTotalUnreadCount=t.resetTotalUnreadCountSucceeded=t.resetTotalUnreadCountRequested=void 0;var a,s=l(r("YEIV")),n=l(r("QbLZ")),o=l(r("14Xm"));t.resetTotalUnreadCountRequestedSaga=S,t.watchCount=_;var d,c=r("6SzI"),u=r("5rFJ"),i=l(r("jtha"));function l(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var f=o.default.mark(S),p=o.default.mark(_),v=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,c.createActions)({RESET_TOTAL_UNREAD_COUNT_REQUESTED:function(){return{}},RESET_TOTAL_UNREAD_COUNT_SUCCEEDED:function(e){return{count:e.count}},UPDATE_TOTAL_UNREAD_COUNT:function(e){return{action:e.action,count:e.count}}})),g=v.resetTotalUnreadCountRequested,h=v.resetTotalUnreadCountSucceeded,m=v.updateTotalUnreadCount;function S(){var e,t;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.call)(i.default,{parent:"messages",resource:"unread-count"});case 2:return e=r.sent,t=e.total_unread_count,r.next=6,(0,u.put)(h({count:t}));case 6:case"end":return r.stop()}}),f,this)}function _(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeLatest)(g,S);case 2:case"end":return e.stop()}}),p,this)}t.resetTotalUnreadCountRequested=g,t.resetTotalUnreadCountSucceeded=h,t.updateTotalUnreadCount=m;var b,w,M=(a={},(0,s.default)(a,h,(function(e,t){var r=t.payload.count;return(0,n.default)({},e,{totalUnreadCount:r})})),(0,s.default)(a,m,(function(e,t){var r=t.payload,a=r.action,s=r.count,o=e.totalUnreadCount;return o="increase"===a?o+s:o-s,(0,n.default)({},e,{totalUnreadCount:o})})),a);t.default=M,(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(g,"resetTotalUnreadCountRequested","/workspace/src/reducers/conversation/count.js"),b.register(h,"resetTotalUnreadCountSucceeded","/workspace/src/reducers/conversation/count.js"),b.register(m,"updateTotalUnreadCount","/workspace/src/reducers/conversation/count.js"),b.register(S,"resetTotalUnreadCountRequestedSaga","/workspace/src/reducers/conversation/count.js"),b.register(_,"watchCount","/workspace/src/reducers/conversation/count.js"),b.register(M,"default","/workspace/src/reducers/conversation/count.js")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)}).call(this,r("YuTi")(e))},M2OP:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateCurrentFaqId=t.updateFetchFaqMessagesRequestedStatus=t.fetchFaqMessagesSucceeded=t.fetchFaqMessagesRequested=void 0;var a,s=b(r("YEIV")),n=b(r("QbLZ")),o=b(r("jWXv")),d=b(r("rfXi")),c=b(r("14Xm")),u=b(r("4d7F"));t.watchFetch=H;var i,l=r("6SzI"),f=r("5rFJ"),p=r("8TFP"),v=r("ZB2U"),g=r("r2BC"),h=b(r("rN3q")),m=r("tpro"),S=b(r("jtha")),_=b(r("b/qR"));function b(e){return e&&e.__esModule?e:{default:e}}(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&i(e);var w=c.default.mark(G),M=c.default.mark(H),I=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,l.createActions)({FETCH_FAQ_MESSAGES_REQUESTED:function(e){var t=e.sourceId,r=e.shopId,a=e.reset;return{sourceId:t,shopId:r,reset:void 0!==a&&a}},FETCH_FAQ_MESSAGES_SUCCEEDED:function(e){var t=e.messageIds,r=e.sourceId,a=e.status,s=e.offset,n=e.hasMore;return{messageIds:t,sourceId:r,status:a,offset:s,hasMore:void 0===n||n}},UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},UPDATE_CURRENT_FAQ_ID:function(e){return{id:e.id}}})),k=I.fetchFaqMessagesRequested,x=I.fetchFaqMessagesSucceeded,y=I.updateFetchFaqMessagesRequestedStatus,E=I.updateCurrentFaqId;t.fetchFaqMessagesRequested=k,t.fetchFaqMessagesSucceeded=x,t.updateFetchFaqMessagesRequestedStatus=y,t.updateCurrentFaqId=E;var L=function(e){var t=e.sourceId,r=e.shopId,a=e.offset,s=e.limit,n=void 0===s?20:s;return new u.default((function(e,s){(0,S.default)({parent:"conversation",resource:"bundle_message",version:"v1.2",params:{shop_id:r,offset:a,limit:n,source_id:t}}).then((function(t){var r=t.bundle_message,a=t.total;e({messages:r,total:a})})).catch((function(e){s(e)}))}))};function G(e){var t,r,a,s,n,o,d,u,i,l,S,b,M,I=e.payload,k=I.sourceId,G=I.shopId,H=I.reset;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.put)(E({id:k}));case 3:return e.next=5,(0,f.select)(v.currentFaqHistorySeletor);case 5:if(t=e.sent,r=t.offset,a=void 0===r?0:r,s=t.hasMore,!(!(void 0===s||s)||H&&a)){e.next=12;break}return e.abrupt("return",null);case 12:return e.next=14,(0,f.select)(p.currentUserShopIdSelector);case 14:return n=e.sent,e.next=17,(0,f.select)(p.isSubAccountSelector);case 17:return o=e.sent,e.next=20,(0,f.put)(y({status:H?_.default.INIT_PENDING:_.default.PENDING}));case 20:return e.next=22,(0,f.call)(L,{sourceId:k,shopId:G,offset:a});case 22:return d=e.sent,u=d.messages,i=d.total,l=a+u.length,u.sort((function(e,t){return e.id-t.id})),u=u.filter((function(e){return"webview"!==e.type})),S=(0,h.default)("messages",u),b=S.result,M=S.entities,e.next=31,(0,f.put)((0,m.updateEntities)({entities:M}));case 31:return e.next=33,(0,f.call)(g.populateMessageWithSourceAndContent,u,n,o,!0);case 33:return e.next=35,(0,f.put)(x({sourceId:k,offset:l,hasMore:l<i,status:_.default.SUCCEED,messageIds:b}));case 35:e.next=41;break;case 37:return e.prev=37,e.t0=e.catch(0),e.next=41,(0,f.put)(y({status:H?_.default.INIT_FAILED:_.default.FAILED}));case 41:case"end":return e.stop()}}),w,this,[[0,37]])}function H(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.takeEvery)(k,G);case 2:case"end":return e.stop()}}),M,this)}var R,T,C=(a={},(0,s.default)(a,x,(function(e,t){var r=t.payload,a=r.messageIds,c=r.sourceId,u=r.status,i=r.offset,l=r.hasMore,f=e.faqHistoryHash,p=(f[c]||{all:[]}).all,v=(0,d.default)(new o.default(p.concat(a)));return(0,n.default)({},e,{faqHistoryHash:(0,n.default)({},f,(0,s.default)({},c,{all:v,offset:i,hasMore:l})),status:u})})),(0,s.default)(a,y,(function(e,t){var r=t.payload.status;return(0,n.default)({},e,{status:r})})),(0,s.default)(a,E,(function(e,t){var r=t.payload.id;return(0,n.default)({},e,{faqId:r})})),a);t.default=C,(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(R.register(k,"fetchFaqMessagesRequested","/workspace/src/reducers/faqHistory/fetch.js"),R.register(x,"fetchFaqMessagesSucceeded","/workspace/src/reducers/faqHistory/fetch.js"),R.register(y,"updateFetchFaqMessagesRequestedStatus","/workspace/src/reducers/faqHistory/fetch.js"),R.register(E,"updateCurrentFaqId","/workspace/src/reducers/faqHistory/fetch.js"),R.register(L,"fetchFaqHistoryMessages","/workspace/src/reducers/faqHistory/fetch.js"),R.register(G,"fetchFaqMessagesRequestedSaga","/workspace/src/reducers/faqHistory/fetch.js"),R.register(H,"watchFetch","/workspace/src/reducers/faqHistory/fetch.js"),R.register(C,"default","/workspace/src/reducers/faqHistory/fetch.js")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)}).call(this,r("YuTi")(e))},OzYK:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateSearchParams=t.searchConversationsSucceeded=t.searchConversationsRequested=void 0;var a,s=f(r("YEIV")),n=f(r("14Xm")),o=f(r("QbLZ"));t.searchConversationsRequestedSaga=_,t.watchSearch=b;var d,c=r("6SzI"),u=r("5rFJ"),i=r("WNYn"),l=f(r("b/qR"));function f(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var p=n.default.mark(_),v=n.default.mark(b),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,c.createActions)({SEARCH_CONVERSATIONS_REQUESTED:function(e){var t=e.keyword,r=void 0===t?"":t,a=e.shopId;return{keyword:r,shopId:void 0===a?"":a}},SEARCH_CONVERSATIONS_SUCCEEDED:function(e){return{results:e.results,searchStatus:e.searchStatus}},UPDATE_SEARCH_PARAMS:function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}}})),h=g.searchConversationsRequested,m=g.searchConversationsSucceeded,S=g.updateSearchParams;function _(e){var t,r,a,s,d,c=e.payload.keyword;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=c.trim(),e.next=4,(0,u.put)(S({keyword:r,searchStatus:l.default.INIT_PENDING}));case 4:if(!r){e.next=14;break}return a=r.toLocaleLowerCase(),e.next=8,(0,u.select)((function(e){return e.entityReducer}));case 8:return s=e.sent,d=s.shops,e.next=12,(0,u.select)(i.conversationsSelector);case 12:e.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(a)&&!e.faking&&t.push((0,o.default)({},e,{shop_name:(d[e.shop_id]||{}).name}))}));case 14:return e.next=16,(0,u.put)(m({results:t,searchStatus:l.default.SUCCEED}));case 16:case"end":return e.stop()}}),p,this)}function b(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeLatest)(h,_);case 2:case"end":return e.stop()}}),v,this)}t.searchConversationsRequested=h,t.searchConversationsSucceeded=m,t.updateSearchParams=S;var w,M,I=(a={},(0,s.default)(a,m,(function(e,t){var r=t.payload,a=r.results,s=r.searchStatus;return(0,o.default)({},e,{results:a,searchStatus:s})})),(0,s.default)(a,S,(function(e,t){var r=t.payload,a=r.keyword,s=r.searchStatus;return(0,o.default)({},e,{keyword:a,searchStatus:s})})),a);t.default=I,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(h,"searchConversationsRequested","/workspace/src/reducers/conversation/search.js"),w.register(m,"searchConversationsSucceeded","/workspace/src/reducers/conversation/search.js"),w.register(S,"updateSearchParams","/workspace/src/reducers/conversation/search.js"),w.register(_,"searchConversationsRequestedSaga","/workspace/src/reducers/conversation/search.js"),w.register(b,"watchSearch","/workspace/src/reducers/conversation/search.js"),w.register(I,"default","/workspace/src/reducers/conversation/search.js")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)}).call(this,r("YuTi")(e))},PWSW:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchFaqHistorySagas=void 0;var a,s=c(r("QbLZ")),n=r("6SzI"),o=r("M2OP"),d=c(o);function c(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,i,l=t.watchFaqHistorySagas=[o.watchFetch],f=(0,n.handleActions)((0,s.default)({},d.default),{faqHistoryHash:{},faqId:null,status:""});t.default=f,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(l,"watchFaqHistorySagas","/workspace/src/reducers/faqHistory/index.js"),u.register(f,"default","/workspace/src/reducers/faqHistory/index.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},Q3Gn:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchMessageShortcutGroupSagas=void 0;var a,s=c(r("QbLZ")),n=r("6SzI"),o=r("wTcQ"),d=c(o);function c(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,i,l=t.watchMessageShortcutGroupSagas=[o.watchFetch],f=(0,n.handleActions)((0,s.default)({},d.default),{currentGroupType:1});t.default=f,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(l,"watchMessageShortcutGroupSagas","/workspace/src/reducers/messageShortcutGroup/index.js"),u.register(f,"default","/workspace/src/reducers/messageShortcutGroup/index.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},Q8fy:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resetMessagesFetchOffset=t.updateFetchMessagesRequestedStatus=t.fetchMessagesSucceeded=t.fetchMessagesRequested=void 0;var a,s=I(r("YEIV")),n=I(r("14Xm")),o=I(r("QbLZ")),d=I(r("4d7F"));t.watchFetch=q;var c,u=r("6SzI"),i=r("5rFJ"),l=r("8TFP"),f=r("0VV5"),p=r("r2BC"),v=r("KmjB"),g=I(r("rN3q")),h=I(r("jtha")),m=I(r("b/qR")),S=r("763i"),_=r("WNYn"),b=r("eYUK"),w=I(r("kiXb")),M=r("3atR");function I(e){return e&&e.__esModule?e:{default:e}}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&c(e);var k=n.default.mark(C),x=n.default.mark(j),y=n.default.mark(q),E=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,u.createActions)({FETCH_MESSAGES_REQUESTED:function(e){return{conversation:e.conversation,reset:e.reset}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},RESET_MESSAGES_FETCH_OFFSET:function(e){return{conversationId:e.conversationId,offset:e.offset}}})),L=E.fetchMessagesRequested,G=E.fetchMessagesSucceeded,H=E.updateFetchMessagesRequestedStatus,R=E.resetMessagesFetchOffset;t.fetchMessagesRequested=L,t.fetchMessagesSucceeded=G,t.updateFetchMessagesRequestedStatus=H,t.resetMessagesFetchOffset=R;var T=function(e){var t=e.conversationId,r=e.shopId,a=e.offset,s=e.limit,n=void 0===s?20:s;return new d.default((function(e,s){(0,h.default)({parent:"conversations",parentId:t,resource:"messages",params:{shop_id:r,offset:a,limit:n}}).then((function(t){var r=t.messages,a=(void 0===r?[]:r).map((function(e){var t=e.type,r=e.status;return"text"===t&&"censored_blacklist"===r?(0,o.default)({},e,{errorCode:43,send_status:2,content:{text:w.default.t("common.blacklist.replaced_text")}}):e}));e({messages:a,limit:n})})).catch((function(e){s(e)}))}))};function C(e,t){var r,a,s,o,d,c;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.select)((0,_.getConversation)(e));case 2:if(r=n.sent,s=(a=r||{}).latestMessageStatus,o=a.latestMessage,d=void 0===o?{}:o,!s){n.next=9;break}if(c=t.map((function(e){return e.request_id})),!d.id||!c.includes(d.id)){n.next=9;break}return n.next=9,(0,i.put)((0,S.updateRecord)({name:"conversations",id:e,record:{latestMessage:{},latestMessageStatus:""}}));case 9:case"end":return n.stop()}}),k,this)}function j(e){var t,r,a,s,o,d,c,u,v,h,S,_,w,I,k=e.payload,y=k.conversation,E=k.reset;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.select)((function(e){return e.conversationReducer}));case 3:return t=e.sent,r=t.persist,e.next=7,(0,i.select)(l.currentUserShopIdSelector);case 7:return a=e.sent,e.next=10,(0,i.select)(l.isSubAccountSelector);case 10:if(s=e.sent,o=y.id,d=y.shop_id,c=void 0,!E){e.next=17;break}c=0,e.next=23;break;case 17:return e.next=19,(0,i.select)((function(e){return e.messageReducer}));case 19:u=e.sent,v=u.messageIdsHash,h=v[o]||{},c=h.offset||0;case 23:return e.next=25,(0,i.put)(H({status:E?m.default.INIT_PENDING:m.default.PENDING}));case 25:return e.next=27,(0,i.call)(T,{conversationId:o,shopId:d,offset:c});case 27:if(S=e.sent,_=S.messages,w=S.limit,e.t0=E,!e.t0){e.next=34;break}return e.next=34,(0,i.fork)(C,o,_);case 34:return _.sort((function(e,t){return t.id-e.id})),_.forEach((function(e){return e.send_status=M.MSG_STATUS.SUCCEED})),e.next=38,(0,i.call)(p.populateMessageWithSourceAndContent,_,a,s);case 38:return e.next=40,(0,i.select)(f.messagesWithSourceSelector);case 40:return I=e.sent,e.next=43,(0,i.call)(b.updateOrReplaceAction,I,_,"messages");case 43:return e.next=45,(0,i.put)(G({limit:w,conversationId:o,status:m.default.SUCCEED,persist:r,messageIds:(0,g.default)("messages",_).result,messageRequestIds:_.map((function(e){return e.request_id}))}));case 45:e.next=51;break;case 47:return e.prev=47,e.t1=e.catch(0),e.next=51,(0,i.put)(H({status:E?m.default.INIT_FAILED:m.default.FAILED}));case 51:case"end":return e.stop()}}),x,this,[[0,47]])}function q(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.takeLatest)(L,j);case 2:case"end":return e.stop()}}),y,this)}var F,A,O=(a={},(0,s.default)(a,G,(function(e,t){var r=t.payload,a=r.limit,n=r.status,d=r.conversationId,c=r.messageIds,u=r.persist,i=r.messageRequestIds,l=e.messageIdsHash,f=l[d]||{},p=f.all||[],g=f.failed||[],h=f.offset,m=c[c.length-1],S=c.length>=a;return(0,o.default)({},e,{status:n,messageIdsHash:(0,o.default)({},l,(0,s.default)({},d,(0,o.default)({},f,{hasNext:S,offset:h?m<h?m:h:m,all:(0,v.handleIds)(p.filter((function(e){return!i.includes(e)})),c),failed:g.filter((function(e){return!i.includes(e)}))}))),persist:u})})),(0,s.default)(a,H,(function(e,t){var r=t.payload.status;return(0,o.default)({},e,{status:r})})),(0,s.default)(a,R,(function(e,t){var r=t.payload,a=r.conversationId,n=r.offset,d=e.messageIdsHash,c=d[a];return(0,o.default)({},e,{messageIdsHash:(0,o.default)({},d,(0,s.default)({},a,(0,o.default)({},c,{offset:n})))})})),a);t.default=O,(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(F.register(L,"fetchMessagesRequested","/workspace/src/reducers/message/fetch.js"),F.register(G,"fetchMessagesSucceeded","/workspace/src/reducers/message/fetch.js"),F.register(H,"updateFetchMessagesRequestedStatus","/workspace/src/reducers/message/fetch.js"),F.register(R,"resetMessagesFetchOffset","/workspace/src/reducers/message/fetch.js"),F.register(T,"fetchConversationMessages","/workspace/src/reducers/message/fetch.js"),F.register(C,"changeConversationMessageStatus","/workspace/src/reducers/message/fetch.js"),F.register(j,"fetchMessagesRequestedSaga","/workspace/src/reducers/message/fetch.js"),F.register(q,"watchFetch","/workspace/src/reducers/message/fetch.js"),F.register(O,"default","/workspace/src/reducers/message/fetch.js")),(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&A(e)}).call(this,r("YuTi")(e))},SrNb:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchMessageShortcutSagas=void 0;var a,s=c(r("QbLZ")),n=r("6SzI"),o=r("dlOA"),d=c(o);function c(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,i,l=t.watchMessageShortcutSagas=[o.watchFetch],f=(0,n.handleActions)((0,s.default)({},d.default),{messageShortcutIds:[],status:""});t.default=f,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(l,"watchMessageShortcutSagas","/workspace/src/reducers/messageShortcut/index.js"),u.register(f,"default","/workspace/src/reducers/messageShortcut/index.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},UfXg:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=g(r("14Xm")),s=g(r("m1cH"));t.saveToStore=_;var n,o=g(r("rN3q")),d=r("5rFJ"),c=r("lInC"),u=r("z+6U"),i=r("cokx"),l=r("tpro"),f=r("eYUK"),p=r("3hjT"),v=r("WNYn");function g(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var h,m,S=a.default.mark(_);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function _(e,t,r,n,g){var h,m,_,b,w,M,I,k,x,y,E,L,G,H,R;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return h=(0,o.default)("conversations",e),m=h.result,_=h.entities,a.next=3,(0,d.select)(v.currentConversationSelector);case 3:return b=a.sent,a.next=6,(0,d.select)((function(e){return e.entityReducer}));case 6:return w=a.sent,M=w.conversations,I=void 0===M?{}:M,k=[],b&&b.faking?(x=b.id,k=(0,u.getConversationIds)(t,m,n,x)):k=(0,u.getConversationIds)(t,m,n),y=k.length<i.persistLimit?null:[].concat((0,s.default)(k)).splice(0,i.persistLimit),a.next=14,(0,d.put)((0,l.updateEntities)({entities:{persist:y}}));case 14:return a.next=16,(0,d.call)(f.updateOrReplaceAction,I,e,"conversations");case 16:if(!g){a.next=20;break}return E=(0,o.default)("shops",g),a.next=20,(0,d.put)((0,l.updateEntities)({entities:E.entities}));case 20:return a.next=22,(0,d.put)((0,p.updateConversationListsHash)());case 22:if(!(L=(0,c.generatePersist)(y,r,t))||!L.changed){a.next=35;break}if(G=void 0,H=L.lastConversationId,"older"!==n&&"reset"!==n){a.next=30;break}G=_.conversations[H],a.next=34;break;case 30:return a.next=32,(0,d.select)(v.conversationsSelector);case 32:R=a.sent,G=R.find((function(e){return e.id===H}));case 34:G&&(g?L.oldestReceivedMessageId=G.latest_message_id:L.oldestTimestamp=new Date(G.last_message_time).getTime()/1e3);case 35:return a.abrupt("return",{persistObj:L,resultConversationIds:k});case 36:case"end":return a.stop()}}),S,this)}(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&h.register(_,"saveToStore","/workspace/src/reducers/conversation/handle.js"),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)}).call(this,r("YuTi")(e))},XRLa:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=c(r("14Xm")),s=c(r("gDS+"));t.showCartReminder=f;var n,o=c(r("jtha")),d=r("5rFJ");function c(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var u,i,l=a.default.mark(f);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function f(e){var t,r,n,c,u=e.id,i=e.cartItems;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="get",r=i.slice(0,4),e.next=5,(0,d.call)(o.default,{ssl:!0,parent:"product",resource:t,method:"POST",payload:(0,s.default)({items:r})});case 5:return n=e.sent,c=n[t],e.abrupt("return",{id:u,result:c});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{id:u,fetchStatus:"failed"});case 13:case"end":return e.stop()}}),l,this,[[0,10]])}(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(f,"showCartReminder","/workspace/src/reducers/cartReminder/show.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"aQ+w":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchMessageSagas=void 0;var a,s=b(r("QbLZ")),n=r("6SzI"),o=r("Q8fy"),d=b(o),c=r("bqMa"),u=b(c),i=r("1JFN"),l=r("vqUA"),f=b(l),p=b(r("ryDM")),v=r("g28w"),g=r("0fB8"),h=r("4qdM"),m=b(h),S=r("wyum"),_=r("5jgR");function b(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var w,M,I=t.watchMessageSagas=[o.watchFetch,c.watchSend,i.watchResend,l.watchReceive,_.watchHandle,v.watchTranslate,g.watchPopulate,h.watchOffline,S.watchEvaluation,l.watchOldConversationMessageQueue,l.watchNewConversationMessageQueue],k=(0,n.handleActions)((0,s.default)({},d.default,u.default,f.default,p.default,m.default),{status:"",messageIdsHash:{},offlineMessages:{}});t.default=k,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(I,"watchMessageSagas","/workspace/src/reducers/message/index.js"),w.register(k,"default","/workspace/src/reducers/message/index.js")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)}).call(this,r("YuTi")(e))},bqMa:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.uploadImage=t.abortAllSendingMessages=t.sendMessagesFailed=t.sendMessagesToPending=t.sendingMessages=t.sendMessagesSucceeded=t.sendMessagesRequested=void 0;var a,s=Q(r("sk9p")),n=Q(r("oF3Q")),o=Q(r("YEIV")),d=Q(r("m1cH")),c=Q(r("gDS+")),u=Q(r("4d7F")),i=Q(r("QbLZ")),l=Q(r("14Xm")),f=Q(r("FyfS"));t.sendMessages=_e,t.handleSendSucceededMessages=be,t.watchSend=Me;var p,v=r("6SzI"),g=r("5rFJ"),h=r("tpro"),m=r("763i"),S=r("yDfg"),_=Q(r("jtha")),b=Q(r("rN3q")),w=r("KmjB"),M=r("8TFP"),I=r("0VV5"),k=r("ZGUL"),x=Q(r("Q1t1")),y=Q(r("Cb94")),E=Q(r("P0rt")),L=Q(r("vaWs")),G=Q(r("MkZr")),H=r("XnKn"),R=Q(r("kiXb")),T=r("QCYR"),C=r("WNYn"),j=r("zjIh"),q=r("eYUK"),F=r("r2BC"),A=r("3atR"),O=r("FsNy"),N=r("wNa6"),D=r("1JFN"),U=r("4qdM"),P=Q(r("xk4V")),Y=Q(r("CmkM"));function Q(e){return e&&e.__esModule?e:{default:e}}(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&p(e);var V=l.default.mark(fe),B=l.default.mark(pe),X=l.default.mark(Se),W=l.default.mark(_e),z=l.default.mark(be),Z=l.default.mark(we),J=l.default.mark(Me),K=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,{FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACK_LIST:43,CANCEL_ORDER:44,DEFAULT:-1}),$=H.MessageTypes.MSG_TYPE_IMAGE,ee=H.MessageTypes.MSG_TYPE_TEXT,te=H.MessageTypes.MSG_TYPE_VOUCHER,re=H.MessageTypes.MSG_TYPE_VOUCHER_WEB,ae=H.MessageTypes.MSG_TYPE_WEBVIEW,se=(0,v.createActions)({SEND_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,conversationUserId:e.conversationUserId,messages:e.messages,isFakingSource:e.isFakingSource}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}}}),ne=se.sendMessagesRequested,oe=se.sendMessagesSucceeded,de=se.sendingMessages,ce=se.sendMessagesToPending,ue=se.sendMessagesFailed,ie=se.abortAllSendingMessages;t.sendMessagesRequested=ne,t.sendMessagesSucceeded=oe,t.sendingMessages=de,t.sendMessagesToPending=ce,t.sendMessagesFailed=ue,t.abortAllSendingMessages=ie;var le=t.uploadImage=function(e){var t=e.file,r=e.inChatBotSession,a="string"==typeof t?(0,j.convertBase64ToBlob)(t):t,s=new window.FormData;return s.append("file",a),s.append("in_chatbot_session",r?"in":"out"),(0,_.default)({method:"POST",resource:"images",payload:s})};function fe(e){var t,r,a,s,n,o,d,c,u,i;return l.default.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:l.prev=0,t=!0,r=!1,a=void 0,l.prev=4,s=(0,f.default)(e);case 6:if(t=(n=s.next()).done){l.next=18;break}if(o=n.value,d=o.type,c=o.content,d!==$){l.next=15;break}return l.next=12,le(c);case 12:u=l.sent,i=u.url,o.content={url:i};case 15:t=!0,l.next=6;break;case 18:l.next=24;break;case 20:l.prev=20,l.t0=l.catch(4),r=!0,a=l.t0;case 24:l.prev=24,l.prev=25,!t&&s.return&&s.return();case 27:if(l.prev=27,!r){l.next=30;break}throw a;case 30:return l.finish(27);case 31:return l.finish(24);case 32:l.next=39;break;case 34:return l.prev=34,l.t1=l.catch(0),l.next=38,(0,g.put)((0,k.showOperationFailureToastRequested)({error:l.t1}));case 38:return l.abrupt("return",!1);case 39:case"end":return l.stop()}}),V,this,[[0,34],[4,20,24,32],[25,,27,31]])}function pe(e){var t,r,a,s,n,o,d,c,u,f,p,v,_,w,k=e.payload,x=k.conversationId,y=k.conversationUserId,E=k.messages,L=k.isFakingSource;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.call)(fe,E);case 2:if(void 0!==e.sent){e.next=45;break}return e.next=6,(0,g.select)(M.isSubAccountSelector);case 6:return t=e.sent,e.next=9,(0,g.select)(I.messagesWithSourceSelector);case 9:return r=e.sent,e.next=12,(0,g.call)(T.getItem,"mini-sc_redirect");case 12:return a=e.sent,s=E.map((function(e){return(0,S.makeMessagePayload)({recipientID:y,message:e,isSubAccount:t,redirectInfo:a,conversationId:x})})),e.next=16,(0,g.select)(M.currentUserIdSelector);case 16:return n=e.sent,e.t0=M.currentUserShopIdSelector,e.next=20,(0,g.select)((function(e){return e}));case 20:if(e.t1=e.sent,o=(0,e.t0)(e.t1),d=s.map((function(e){var t=(0,i.default)({},e);t.id=e.request_id,t.from_id=n;var r=t.type,a=t.content;if(["product","order"].includes(r)){var s=r+"_id",o=a[s];t.fetchStatus="done";var d=E.find((function(e){return e.content[s]===o}));d&&(t.textContent=d.textContent)}else r===ee&&(t.translateStatus=H.TranslationStatus.PENDING);return t})),c=r.filter((function(e){return e.hasMessageSource&&!e.isFaking})),u=r.filter((function(e){return e.hasMessageSource&&e.isFaking})),f=u[u.length-1],!u.length){e.next=32;break}return p=[],L||(d[0].sourceContent=f.sourceContent),u.forEach((function(e){p.push((0,g.put)((0,m.deleteRecord)({name:"messages",id:e.id})))})),e.next=32,(0,g.all)(p);case 32:if(!L){e.next=40;break}if(v=d[0]||{},_=v.source_content||{},!c.filter((function(e){var t=e.source_content||{};return _.shop_id===t.shop_id&&_.product_id===t.product_id&&_.order_id===t.order_id})).length){e.next=38;break}return e.abrupt("return");case 38:return e.next=40,(0,g.call)(F.populateMessageWithSourceAndContent,d,o,t,!0);case 40:return w=(0,b.default)("messages",d),e.next=43,(0,g.put)((0,h.updateEntities)({entities:w.entities}));case 43:return e.next=45,_e({conversationId:x,requestIds:w.result,messages:s,isRedirect:!!a,isFakingSource:L});case 45:case"end":return e.stop()}}),B,this)}function ve(e){return e.content&&e.content.translation&&e.content.translation.text}function ge(e,t){return delete e.errorCode,delete e.error,(0,i.default)({},e,{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}var he=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type"],me=function(e,t,r){var a={};return he.forEach((function(t){e[t]&&(a[t]=e[t])})),e.retryRequestId&&(a.request_id=e.retryRequestId),new u.default((function(s){(0,_.default)({method:"POST",resource:"messages",payload:(0,c.default)((0,i.default)({},a,{source:r?"minichat":"pc_mall"}))}).then((function(e){s(e),t&&(0,T.removeItem)("mini-sc_redirect")})).catch((function(t){var r=void 0;switch(!0){case t instanceof E.default:r=K.FORBIDDEN;break;case t instanceof x.default:r=K.LIMITING;break;case t instanceof L.default:r=K.CUSTOM_ERROR;break;case t instanceof y.default:r=K.BLACK_LIST,e.content={text:R.default.t("common.blacklist.replaced_text")};break;case t instanceof G.default:r=K.CANCEL_ORDER;break;default:r=K.DEFAULT}s((0,i.default)({},e,{requestId:e.request_id,errorCode:r,error:t}))}))}))};function Se(e,t){return l.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,g.delay)(1e3);case 2:return r.next=4,(0,g.put)(ce({conversationId:e,requestIds:t}));case 4:case"end":return r.stop()}}),X,this)}function _e(e){var t,r,a,s,n,o,c,u,f,p,v,h,S,_,b,w,x,y,E,L,G,R,T=e.conversationId,j=e.requestIds,q=e.messages,F=e.isRedirect,Q=e.isFakingSource;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.select)(M.networkStatusSelector);case 2:return t=e.sent,e.next=5,(0,g.select)(M.isScChatSelector);case 5:return r=e.sent,a=q.length,e.next=9,(0,g.put)(de({conversationId:T,requestIds:j}));case 9:if(Q){e.next=79;break}return e.next=12,(0,g.spawn)(Se,T,j);case 12:return e.next=14,(0,g.put)((0,m.updateRecord)({name:"conversations",id:T,record:{latestMessageStatus:"sending",latestMessage:q[a-1]}}));case 14:if(s=0,n=[],o=[],c=[],u={},"offline"!==t){e.next=26;break}f=q.map((function(e){return(0,i.default)({},e,{requestId:e.request_id})})),c.push.apply(c,(0,d.default)(f)),o.push.apply(o,(0,d.default)(f)),u=q[a-1],e.next=37;break;case 26:if(!(s<a)){e.next=37;break}return p=q[s],e.next=30,(0,g.call)(me,p,F,r);case 30:(v=e.sent).errorCode?o.push(v):n.push(v),v.error&&v.error.offlineError&&c.push(v),++s===a&&(u=v),e.next=26;break;case 37:if(!n.length){e.next=41;break}return n.forEach((function(e){e.send_status=A.MSG_STATUS.SUCCEED})),e.next=41,(0,g.call)(be,n,T);case 41:if(!o.length){e.next=74;break}return e.next=44,(0,g.select)((0,C.getConversation)(T));case 44:if(!(h=e.sent)||!h.faking){e.next=51;break}if(S=o.find((function(e){return[-1,42].includes(e.errorCode)})),e.t0=S,!e.t0){e.next=51;break}return e.next=51,(0,g.put)((0,k.showOperationFailureToastRequested)({error:S.error}));case 51:return _=[],o.forEach((function(e){var t=e.errorCode,r=e.error,a=e.request_id,s=e.type,n=e.content;t===K.LIMITING&&_.push((0,g.put)((0,k.showOperationFailureToastRequested)({error:r})));var o={errorCode:t,translateStatus:H.TranslationStatus.FAILED,retryRequestId:(0,P.default)()};s===ee&&t===K.BLACK_LIST&&(o.content=n),_.push((0,g.put)((0,m.updateRecord)({name:"messages",id:a,record:o})))})),e.next=55,(0,g.all)(_);case 55:return b=o.map((function(e){return e.requestId})),e.next=58,(0,g.put)((0,m.updateRecord)({name:"conversations",id:T,record:{latestMessage:u,latestMessageStatus:"failed"}}));case 58:return e.next=60,(0,g.put)(ue({conversationId:T,requestIds:b}));case 60:if(!(w=o.find((function(e){return e.errorCode===K.CANCEL_ORDER})))){e.next=74;break}return e.next=64,(0,g.select)((0,I.getMessageSelector)(w.request_id));case 64:return x=e.sent,e.next=67,(0,g.select)(C.currentConversationSelector);case 67:return y=e.sent,E=(y||{}).shop,L=(E=void 0===E?{}:E).country,G=L&&L.toLowerCase(),e.next=74,(0,g.put)((0,O.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:G||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){N.store.dispatch((0,O.closeModal)());var e=ge(x,!0);N.store.dispatch((0,D.resendMessageRequested)({conversationId:T,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){N.store.dispatch((0,O.closeModal)());var e=ge(x,!1);N.store.dispatch((0,D.resendMessageRequested)({conversationId:T,message:e}))}}}}));case 74:if(!c.length){e.next=79;break}return R=c.map((function(e){return e.requestId})),e.next=78,(0,g.put)((0,U.sendMessagesFailedByOffline)({conversationId:T,requestIds:R}));case 78:(0,Y.default)();case 79:case"end":return e.stop()}}),W,this)}function be(e,t){var r,a,s,n,d,c,u,f,p,v,h,S,_,M;return l.default.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return r=[],a=[],l.next=4,(0,g.select)(C.currentConversationIdSelector);case 4:if((s=l.sent)===t){l.next=12;break}return l.next=8,(0,g.select)((0,I.conversationMessageIdsSelector)(t));case 8:return r=l.sent,l.next=11,(0,g.select)((0,I.getMessagesSelector)(r.all));case 11:a=l.sent;case 12:return l.next=14,(0,g.select)(I.messagesWithSourceSelector);case 14:if(n=l.sent,d=(0,b.default)("messages",n).entities.messages||{},c=[],(u=e.map((function(e){var r=e.request_id,o=e.id,u=e.content;if(e.type===ae&&u&&u.type===te&&(u.type=re),d[r]){c.push((0,g.put)((0,m.deleteRecord)({name:"messages",id:r})));var l=(0,i.default)({},d[r],{translateStatus:ve(e)?H.TranslationStatus.SHOW:H.TranslationStatus.FAILED});return d[o]?null:(0,w.deepMerge)(l,e)}var f=null;if((f=s!==t?a.filter((function(e){return e&&e.retryRequestId===r})):n.filter((function(e){return e.retryRequestId===r}))).length){var p=f[0].request_id;c.push((0,g.put)((0,m.deleteRecord)({name:"messages",id:p})));var v=(0,i.default)({},d[p],{translateStatus:ve(e)?H.TranslationStatus.SHOW:H.TranslationStatus.FAILED}),h=d[o]?null:(0,w.deepMerge)(v,e);return h&&h.retryRequestId&&(h.original_request_id=p),h}return null})).filter((function(e){return e}))).length){l.next=20;break}return l.abrupt("return");case 20:return l.next=22,(0,g.call)(q.updateOrReplaceAction,d,u,"messages");case 22:return l.next=24,(0,g.put)(oe({conversationId:t,requestIdToMessageId:u.reduce((function(e,t){return t.original_request_id?(0,i.default)({},e,(0,o.default)({},t.original_request_id,t.id)):(0,i.default)({},e,(0,o.default)({},t.request_id,t.id))}),{})}));case 24:return u.sort((function(e,t){return t.id-e.id})),l.next=27,(0,g.all)(c);case 27:return f=u[0],p=f.id,v=f.content,h=f.created_at,S=f.created_timestamp,_=f.type,M=f.message_option,l.next=30,(0,g.put)((0,m.updateRecord)({name:"conversations",id:t,record:{latest_message_id:p,latest_message_type:_,latest_message_content:v,last_message_time:h,last_message_option:M,max_general_option_hide_time:S,unread_count:0,flag:"normal",latestMessage:66496===M?{content:v,type:_}:{},latestMessageStatus:66496===M?"failed":""}}));case 30:case"end":return l.stop()}}),z,this)}function we(){var e,t,r;return l.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.select)((function(e){return e}));case 2:return e=a.sent,a.next=5,(0,g.select)(I.messageIdsHashSelector);case 5:return t=a.sent,r=[],(0,n.default)(t).forEach((function(t){var a=(0,s.default)(t,2),n=a[0],o=a[1].sending||[];if(o.length){r.push((0,g.put)(ue({conversationId:n,requestIds:o})));var d=((0,C.getConversation)(n)(e)||{}).latestMessage,c=void 0===d?{}:d;c.id&&o.includes(c.id)&&r.push((0,g.put)((0,m.updateRecord)({name:"conversations",id:n,record:{latestMessageStatus:"failed"}})))}})),a.next=10,(0,g.all)(r);case 10:case"end":return a.stop()}}),Z,this)}function Me(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.takeEvery)(ne,pe);case 2:return e.next=4,(0,g.takeLatest)(ie,we);case 4:case"end":return e.stop()}}),J,this)}var Ie,ke,xe=(a={},(0,o.default)(a,de,(function(e,t){var r=t.payload,a=r.conversationId,s=r.requestIds,n=e.messageIdsHash,d=n[a]||{},c=d.all||[],u=d.failed||[];return(0,i.default)({},e,{messageIdsHash:(0,i.default)({},n,(0,o.default)({},a,(0,i.default)({},d,{all:s.reverse().filter((function(e){return!c.includes(e)})).concat(c),failed:u.filter((function(e){return!s.includes(e)}))})))})})),(0,o.default)(a,ce,(function(e,t){var r=t.payload,a=r.conversationId,s=r.requestIds,n=e.messageIdsHash,d=n[a]||{},c=d.sending||[],u=d.all||[],l=d.failed||[],f=s.filter((function(e){return u.includes(e)&&!l.includes(e)}));return(0,i.default)({},e,{messageIdsHash:(0,i.default)({},n,(0,o.default)({},a,(0,i.default)({},d,{sending:c.concat(f)})))})})),(0,o.default)(a,oe,(function(e,t){var r=t.payload,a=r.conversationId,s=r.requestIdToMessageId,n=e.messageIdsHash,d=n[a]||{},c=(d.all||[]).map((function(e){return s[e]?s[e]:e})),u=d.sending||[];return(0,i.default)({},e,{messageIdsHash:(0,i.default)({},n,(0,o.default)({},a,(0,i.default)({},d,{all:c,offset:c[c.length-1],sending:u.filter((function(e){return!s.hasOwnProperty(e)}))})))})})),(0,o.default)(a,ue,(function(e,t){var r=t.payload,a=r.conversationId,s=r.requestIds,n=e.messageIdsHash,d=n[a]||{},c=d.failed||[],u=d.sending||[];return(0,i.default)({},e,{messageIdsHash:(0,i.default)({},n,(0,o.default)({},a,(0,i.default)({},d,{sending:u.filter((function(e){return!s.includes(e)})),failed:c.concat(s)})))})})),a);t.default=xe,(Ie="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(Ie.register(K,"errorCodeMap","/workspace/src/reducers/message/send.js"),Ie.register($,"MSG_TYPE_IMAGE","/workspace/src/reducers/message/send.js"),Ie.register(ee,"MSG_TYPE_TEXT","/workspace/src/reducers/message/send.js"),Ie.register(te,"MSG_TYPE_VOUCHER","/workspace/src/reducers/message/send.js"),Ie.register(re,"MSG_TYPE_VOUCHER_WEB","/workspace/src/reducers/message/send.js"),Ie.register(ae,"MSG_TYPE_WEBVIEW","/workspace/src/reducers/message/send.js"),Ie.register(ne,"sendMessagesRequested","/workspace/src/reducers/message/send.js"),Ie.register(oe,"sendMessagesSucceeded","/workspace/src/reducers/message/send.js"),Ie.register(de,"sendingMessages","/workspace/src/reducers/message/send.js"),Ie.register(ce,"sendMessagesToPending","/workspace/src/reducers/message/send.js"),Ie.register(ue,"sendMessagesFailed","/workspace/src/reducers/message/send.js"),Ie.register(ie,"abortAllSendingMessages","/workspace/src/reducers/message/send.js"),Ie.register(le,"uploadImage","/workspace/src/reducers/message/send.js"),Ie.register(fe,"handleImageMessages","/workspace/src/reducers/message/send.js"),Ie.register(pe,"sendMessagesRequestedSaga","/workspace/src/reducers/message/send.js"),Ie.register(ve,"checkTranslation","/workspace/src/reducers/message/send.js"),Ie.register(ge,"handleCancelOrderMessage","/workspace/src/reducers/message/send.js"),Ie.register(he,"sendMesageParams","/workspace/src/reducers/message/send.js"),Ie.register(me,"sendMessage","/workspace/src/reducers/message/send.js"),Ie.register(Se,"delayTodo","/workspace/src/reducers/message/send.js"),Ie.register(_e,"sendMessages","/workspace/src/reducers/message/send.js"),Ie.register(be,"handleSendSucceededMessages","/workspace/src/reducers/message/send.js"),Ie.register(we,"abortAllSendingMessagesSaga","/workspace/src/reducers/message/send.js"),Ie.register(Me,"watchSend","/workspace/src/reducers/message/send.js"),Ie.register(xe,"default","/workspace/src/reducers/message/send.js")),(ke="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&ke(e)}).call(this,r("YuTi")(e))},cokx:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.sagas=t.reducers=t.preload=t.persistLimit=void 0;var a=B(r("14Xm")),s=B(r("m1cH")),n=r("ptXS");Object.defineProperty(t,"preload",{enumerable:!0,get:function(){return n.preload}});var o,d=r("SVmU"),c=r("5rFJ"),u=r("JbkK"),i=B(r("y8ld")),l=B(r("6RWM")),f=B(r("QJ1Q")),p=r("/gpY"),v=B(p),g=r("igIW"),h=B(g),m=r("GXei"),S=B(m),_=r("ZoJF"),b=B(_),w=r("N6RE"),M=B(w),I=r("oKYE"),k=B(I),x=r("aQ+w"),y=B(x),E=r("zTxb"),L=B(E),G=r("7b+N"),H=B(G),R=r("7VPt"),T=B(R),C=r("eAbP"),j=B(C),q=r("rfE5"),F=B(q),A=B(r("FsNy")),O=r("RArh"),N=B(O),D=r("SrNb"),U=B(D),P=r("Q3Gn"),Y=B(P),Q=r("PWSW"),V=B(Q);function B(e){return e&&e.__esModule?e:{default:e}}(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var X,W,z=t.persistLimit=(0,q.supportDB)()?1e3:100,Z={blacklist:["modalReducer","userReducer"]},J={key:"mini-root",storage:F.default,blacklist:["toastReducer","socketReducer","draftReducer","modalReducer","productReducer","voucherReducer"],debug:!1},K={userReducer:v.default,shopReducer:h.default,orderReducer:M.default,toastReducer:S.default,draftReducer:i.default,offerReducer:b.default,entityReducer:l.default,socketReducer:k.default,messageReducer:y.default,stickerReducer:L.default,productReducer:H.default,settingsReducer:f.default,unreadCountReducer:T.default,conversationReducer:j.default,modalReducer:A.default,voucherReducer:N.default,messageShortcutReducer:U.default,messageShortcutGroupReducer:Y.default,faqHistoryReducer:V.default},$=(0,u.resetReducers)(Z,K),ee=t.reducers=(0,d.persistCombineReducers)(J,$),te=t.sagas=a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.all)([].concat((0,s.default)(p.watchUserSagas),(0,s.default)(g.watchShopSagas),(0,s.default)(_.watchOfferSagas),(0,s.default)(m.watchToastSagas),(0,s.default)(I.watchSocketSagas),(0,s.default)(R.watchUnreadSagas),(0,s.default)(E.watchStickerSagas),(0,s.default)(x.watchMessageSagas),(0,s.default)(G.watchProductSagas),(0,s.default)(C.watchConversationSagas),(0,s.default)(w.watchOrderSagas),(0,s.default)(O.watchVoucherSagas),(0,s.default)(D.watchMessageShortcutSagas),(0,s.default)(P.watchMessageShortcutGroupSagas),(0,s.default)(Q.watchFaqHistorySagas)).map(c.call));case 2:case"end":return e.stop()}}),e,this)}));(X="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(X.register(z,"persistLimit","/workspace/src/reducers/index.js"),X.register(Z,"ResetConfig","/workspace/src/reducers/index.js"),X.register(J,"PersistConfig","/workspace/src/reducers/index.js"),X.register(K,"appReducers","/workspace/src/reducers/index.js"),X.register($,"resetableReducers","/workspace/src/reducers/index.js"),X.register(ee,"reducers","/workspace/src/reducers/index.js"),X.register(te,"sagas","/workspace/src/reducers/index.js")),(W="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&W(e)}).call(this,r("YuTi")(e))},dlOA:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateMessageShortcutStatus=t.fetchMessageShortcutSucceed=t.fetchMessageShortcutRequested=void 0;var a,s=v(r("YEIV")),n=v(r("QbLZ")),o=v(r("14Xm"));t.watchFetch=M;var d,c=r("6SzI"),u=r("5rFJ"),i=r("tpro"),l=v(r("rN3q")),f=v(r("jtha")),p=v(r("b/qR"));function v(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var g=o.default.mark(w),h=o.default.mark(M),m=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,c.createActions)({FETCH_MESSAGE_SHORTCUT_REQUESTED:function(){return{}},FETCH_MESSAGE_SHORTCUT_SUCCEED:function(e){return{messageShortcutIds:e.messageShortcutIds}},UPDATE_MESSAGE_SHORTCUT_STATUS:function(e){return{status:e.status}}})),S=m.fetchMessageShortcutRequested,_=m.fetchMessageShortcutSucceed,b=m.updateMessageShortcutStatus;function w(){var e,t,r,a,s;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,u.put)(b({status:p.default.INIT_PENDING}));case 3:return n.next=5,(0,u.call)(f.default,{resource:"message_shortcuts",parent:"user"});case 5:return e=n.sent,t=e.message_shortcuts,r=(0,l.default)("messageShortcuts",t),a=r.entities,s=r.result,n.next=10,(0,u.put)((0,i.updateEntities)({entities:a}));case 10:return n.next=12,(0,u.put)(_({messageShortcutIds:s}));case 12:return n.next=14,(0,u.put)(b({status:p.default.SUCCEED}));case 14:n.next=20;break;case 16:return n.prev=16,n.t0=n.catch(0),n.next=20,(0,u.put)(b({status:p.default.INIT_FAILED}));case 20:case"end":return n.stop()}}),g,this,[[0,16]])}function M(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeEvery)(S,w);case 2:case"end":return e.stop()}}),h,this)}t.fetchMessageShortcutRequested=S,t.fetchMessageShortcutSucceed=_,t.updateMessageShortcutStatus=b;var I,k,x=(a={},(0,s.default)(a,_,(function(e,t){var r=t.payload.messageShortcutIds;return(0,n.default)({},e,{messageShortcutIds:r})})),(0,s.default)(a,b,(function(e,t){var r=t.payload.status;return(0,n.default)({},e,{status:r})})),a);t.default=x,(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(S,"fetchMessageShortcutRequested","/workspace/src/reducers/messageShortcut/fetch.js"),I.register(_,"fetchMessageShortcutSucceed","/workspace/src/reducers/messageShortcut/fetch.js"),I.register(b,"updateMessageShortcutStatus","/workspace/src/reducers/messageShortcut/fetch.js"),I.register(w,"fetchMessageShortcutSaga","/workspace/src/reducers/messageShortcut/fetch.js"),I.register(M,"watchFetch","/workspace/src/reducers/messageShortcut/fetch.js"),I.register(x,"default","/workspace/src/reducers/messageShortcut/fetch.js")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)}).call(this,r("YuTi")(e))},eAbP:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.watchConversationSagas=void 0;var a,s=y(r("QbLZ")),n=r("6SzI"),o=r("mzZX"),d=y(o),c=r("gv+x"),u=y(c),i=r("9vGo"),l=y(i),f=y(r("vack")),p=r("OzYK"),v=y(p),g=r("8Ryq"),h=y(g),m=r("I45U"),S=y(m),_=y(r("wgPM")),b=r("4fYm"),w=y(b),M=r("twjD"),I=r("5rLn"),k=y(r("7nv7")),x=y(r("3hjT"));function y(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var E,L,G=t.watchConversationSagas=[o.watchDelete,c.watchShow,i.watchPin,p.watchSearch,b.watchMark,m.watchCount,M.watchChangeStatus,g.watchSubFetch,I.watchDetail],H=(0,n.handleActions)((0,s.default)({},d.default,u.default,l.default,f.default,v.default,S.default,_.default,h.default,k.default,x.default,w.default),{conversationIds:[],conversationIdsMap:{},latestTimestamp:-1,oldestTimestamp:-1,maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},totalUnreadCount:0,status:"",hasMore:!0,persist:null,results:[],searchStatus:"",direction:"",listsHash:"",syncFetchException:0,conversationMark:{}});t.default=H,(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(G,"watchConversationSagas","/workspace/src/reducers/conversation/index.js"),E.register(H,"default","/workspace/src/reducers/conversation/index.js")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)}).call(this,r("YuTi")(e))},g28w:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.changeTranslateStatus=t.translateMessagesRequested=void 0;var a=l(r("14Xm")),s=l(r("gDS+"));t.watchTranslate=I;var n,o=r("6SzI"),d=r("5rFJ"),c=l(r("jtha")),u=r("763i"),i=r("XnKn");function l(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var f=a.default.mark(w),p=a.default.mark(M),v=a.default.mark(I),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({TRANSLATE_MESSAGES_REQUESTED:function(e){return{messageId:e.messageId,text:e.text,toUserId:e.toUserId,shopId:e.shopId,from:e.from}},CHANGE_TRANSLATE_STATUS:function(e){return{messageId:e.messageId,status:e.status}}})),h=g.translateMessagesRequested,m=g.changeTranslateStatus;t.translateMessagesRequested=h,t.changeTranslateStatus=m;var S,_,b=function(e,t,r,a){var s="failed"!==a?t:{translateStatus:i.TranslationStatus.FAILED,content:{text:r,translation:{text:"",manual:a}}};return(0,d.put)((0,u.updateRecord)({name:"messages",id:e,record:s}))};function w(e){var t,r,n,o=e.payload,u=o.messageId,l=o.text,p=o.toUserId,v=o.shopId,g=o.from;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={translateStatus:i.TranslationStatus.PENDING},e.next=4,b(u,t);case 4:return e.next=6,(0,d.call)(c.default,{method:"POST",resource:"messages",suffix:"translate",payload:(0,s.default)({text:l,from:g,to_user_id:p,shop_id:v})});case 6:if(!(r=e.sent).text){e.next=13;break}return n={translateStatus:i.TranslationStatus.SUCCEED,content:{text:l,translation:r}},e.next=11,b(u,n);case 11:e.next=15;break;case 13:return e.next=15,b(u,null,l,"failed");case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,b(u,null,l,"failed");case 21:case"end":return e.stop()}}),f,this,[[0,17]])}function M(e){var t,r=e.payload,s=r.messageId,n=r.status;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={translateStatus:n},e.next=3,b(s,t);case 3:case"end":return e.stop()}}),p,this)}function I(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(h,w);case 2:return e.next=4,(0,d.takeEvery)(m,M);case 4:case"end":return e.stop()}}),v,this)}(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(h,"translateMessagesRequested","/workspace/src/reducers/message/translate.js"),S.register(m,"changeTranslateStatus","/workspace/src/reducers/message/translate.js"),S.register(b,"generateRecordAction","/workspace/src/reducers/message/translate.js"),S.register(w,"translateMessagesRequestedSaga","/workspace/src/reducers/message/translate.js"),S.register(M,"changeTranslateStatusSaga","/workspace/src/reducers/message/translate.js"),S.register(I,"watchTranslate","/workspace/src/reducers/message/translate.js")),(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&_(e)}).call(this,r("YuTi")(e))},"gv+x":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resetConversationSucceeded=t.resetConversationRequested=t.showConversationSucceeded=t.showConversationRequested=void 0;var a,s=b(r("YEIV")),n=b(r("14Xm")),o=b(r("QbLZ")),d=b(r("GQeE"));t.showConversationRequestedSaga=R,t.watchShow=C;var c,u=r("6SzI"),i=r("Q8fy"),l=r("ziGp"),f=r("763i"),p=r("5rFJ"),v=r("4fYm"),g=r("gXnt"),h=r("OVuk"),m=r("Bk9M"),S=r("8TFP"),_=r("vqUA");function b(e){return e&&e.__esModule?e:{default:e}}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&c(e);var w=n.default.mark(R),M=n.default.mark(T),I=n.default.mark(C),k=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,{hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"}),x=function(e){var t={},r=e.length;return(0,d.default)(k).forEach((function(a){t[a]=!r||e.includes(k[a])})),t},y=(0,u.createActions)({SHOW_CONVERSATION_REQUESTED:function(e){return{conversation:e.conversation,refresh:e.refresh,read:e.read}},SHOW_CONVERSATION_SUCCEEDED:function(e){return{conversationId:e.conversationId}},RESET_CONVERSATION_REQUESTED:function(){return{}},RESET_CONVERSATION_SUCCEEDED:function(){return{}}}),E=y.showConversationRequested,L=y.showConversationSucceeded,G=y.resetConversationRequested,H=y.resetConversationSucceeded;function R(e){var t,r,a,s,d,c,u,b,M,I,k,y,E,G,H,R,T,C,j,q=e.payload,F=q.conversation,A=q.refresh,O=q.read;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.select)(S.isSubAccountSelector);case 3:return t=e.sent,r=F.faking,a=F.status,s=F.to_id,d=F.shop_id,c=F.to_shop_id,u=F.id,b=F.unread_count,M=F.latest_message_id,e.next=7,(0,p.spawn)(l.showUser,{userId:s,shopId:d,buyerShopId:c});case 7:return e.next=9,(0,p.put)(L({conversationId:u}));case 9:return e.next=11,(0,p.call)(_.handleCurrentConversationChange,u);case 11:if(I=e.sent,!A){e.next=17;break}return e.next=15,(0,p.put)((0,i.fetchMessagesRequested)({conversation:F,reset:!0}));case 15:e.next=25;break;case 17:return e.next=19,(0,p.select)((function(e){return e.messageReducer}));case 19:if(k=e.sent,y=k.messageIdsHash,E=y[u]||{},G=E.all,!((void 0===G?[]:G).length<20)){e.next=25;break}return e.next=25,(0,p.put)((0,i.fetchMessagesRequested)({conversation:F}));case 25:if(!(!r&&O&&"closed"!==a&&b>0||I)){e.next=30;break}return H=I||M,e.next=30,(0,p.put)((0,v.markMessagesRequested)({conversationId:u,isRead:!0,latestMessageId:H,shopId:d,unreadCount:b}));case 30:if(R=null,!t){e.next=40;break}return e.next=34,(0,p.call)(g.fetchShopAuth,(0,g.fetchShopAuthRequested)({shopId:d}));case 34:T=e.sent,C=T.auth_names,R=x(void 0===C?[]:C),e.next=41;break;case 40:R=x([]);case 41:return e.next=43,(0,p.select)((0,m.shopSelector)(d));case 43:if(j=e.sent){e.next=48;break}return e.next=47,(0,p.call)(h.showShop,{payload:{shopId:d}});case 47:j=e.sent;case 48:return e.next=50,(0,p.put)((0,f.updateRecord)({name:"conversations",id:u,record:(0,o.default)({shop:j},R)}));case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(0),console.error("*** Show Conversation Failed: ",e.t0);case 55:case"end":return e.stop()}}),w,this,[[0,52]])}function T(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.put)(H());case 2:case"end":return e.stop()}}),M,this)}function C(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.takeLatest)(E,R);case 2:return e.next=4,(0,p.takeEvery)(G,T);case 4:case"end":return e.stop()}}),I,this)}t.showConversationRequested=E,t.showConversationSucceeded=L,t.resetConversationRequested=G,t.resetConversationSucceeded=H;var j,q,F=(a={},(0,s.default)(a,L,(function(e,t){var r=t.payload.conversationId;return(0,o.default)({},e,{currentConversationId:r})})),(0,s.default)(a,H,(function(e){return(0,o.default)({},e,{currentConversationId:null})})),a);t.default=F,(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(k,"SHOP_ACCESSES","/workspace/src/reducers/conversation/show.js"),j.register(x,"getAccesses","/workspace/src/reducers/conversation/show.js"),j.register(E,"showConversationRequested","/workspace/src/reducers/conversation/show.js"),j.register(L,"showConversationSucceeded","/workspace/src/reducers/conversation/show.js"),j.register(G,"resetConversationRequested","/workspace/src/reducers/conversation/show.js"),j.register(H,"resetConversationSucceeded","/workspace/src/reducers/conversation/show.js"),j.register(R,"showConversationRequestedSaga","/workspace/src/reducers/conversation/show.js"),j.register(T,"resetConversationSaga","/workspace/src/reducers/conversation/show.js"),j.register(C,"watchShow","/workspace/src/reducers/conversation/show.js"),j.register(F,"default","/workspace/src/reducers/conversation/show.js")),(q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&q(e)}).call(this,r("YuTi")(e))},kiXb:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.changeLanguage=t.language=void 0;var a,s,n=r("XzT5"),o=(a=n)&&a.__esModule?a:{default:a};(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var d=function(){var e=window.location.hostname;if("localhost"===e)return"vi-VN";switch(e.split(".").pop()){case"tw":return"zh-Hant";case"th":return"th-TH";case"vn":return"vi-VN";case"id":return"id-ID";case"my":return"ms-MY";case"br":return"pt-BR";default:return"en"}},c=t.language=d();o.default.init({lng:c,fallbackLng:c,defaultNS:"common",keySeparator:!1,debug:!1,resources:{},interpolation:{escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}});var u,i,l=t.changeLanguage=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";o.default.changeLanguage(e),o.default.addResourceBundle(e,r,t,!0,!0)},f=o.default;t.default=f,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register("vi-VN","locale","/workspace/src/i18n.js"),u.register(d,"getLanguage","/workspace/src/i18n.js"),u.register(c,"language","/workspace/src/i18n.js"),u.register(l,"changeLanguage","/workspace/src/i18n.js"),u.register(f,"default","/workspace/src/i18n.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},laFX:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=p(r("14Xm")),s=p(r("gDS+"));t.showFeedStory=m;var n,o=p(r("rN3q")),d=p(r("jtha")),c=r("lInC"),u=r("5rFJ"),i=r("tpro"),l=r("WNYn"),f=r("esz8");function p(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var v,g,h=a.default.mark(m);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function m(e){var t,r,n,p,v,g,m=e.payload,S=m.id,_=m.creatorId;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.select)(l.currentConversationSelector);case 2:return t=e.sent,r=t.shop_id,e.prev=4,e.next=7,(0,u.select)((0,f.feedStorySelector)(S));case 7:if(n=e.sent,(0,c.shouldPersistItem)(n,!1)){e.next=17;break}return e.next=11,(0,u.call)(d.default,{parent:"feed",resource:"stories",params:{ids:(0,s.default)([S]),creator:_,shop_id:r}});case 11:return p=e.sent,(n=p.stories[0]).storedTimestamp=Date.now(),v=(0,o.default)("feedStories",n),g=v.entities,e.next=17,(0,u.put)((0,i.updateEntities)({entities:g}));case 17:return e.abrupt("return",n);case 20:return e.prev=20,e.t0=e.catch(4),e.abrupt("return",{});case 23:case"end":return e.stop()}}),h,this,[[4,20]])}(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&v.register(m,"showFeedStory","/workspace/src/reducers/feedStory/show.js"),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)}).call(this,r("YuTi")(e))},mzZX:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.deleteConversationSucceeded=t.deleteConversationRequested=void 0;var a=p(r("rfXi")),s=p(r("jWXv")),n=p(r("YEIV")),o=p(r("QbLZ")),d=p(r("14Xm"));t.deleteConversationRequestedSaga=_,t.watchDelete=b;var c,u=r("6SzI"),i=r("5rFJ"),l=p(r("jtha")),f=r("ZGUL");function p(e){return e&&e.__esModule?e:{default:e}}(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&c(e);var v=d.default.mark(_),g=d.default.mark(b),h=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,u.createActions)({DELETE_CONVERSATION_REQUESTED:function(e){return{conversationId:e.conversationId,shopId:e.shopId}},DELETE_CONVERSATION_SUCCEEDED:function(e){return{conversationId:e.conversationId}}})),m=h.deleteConversationRequested,S=h.deleteConversationSucceeded;function _(e){var t=e.payload,r=t.conversationId,a=t.shopId;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.call)(l.default,{method:"DELETE",resource:"conversations",id:r,params:{shop_id:a}});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,(0,i.put)((0,f.showOperationFailureToastRequested)({error:e.t0}));case 9:case"end":return e.stop()}}),v,this,[[0,5]])}function b(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.takeEvery)(m,_);case 2:case"end":return e.stop()}}),g,this)}t.deleteConversationRequested=m,t.deleteConversationSucceeded=S;var w,M,I=(0,n.default)({},S,(function(e,t){var r=t.payload.conversationId,d=(0,o.default)({},e.conversationIdsMap,(0,n.default)({},r,!1)),c=new s.default(e.conversationIds);c.delete(r);var u=(0,a.default)(c),i=e.currentConversationId;return(0,o.default)({},e,{currentConversationId:i===r?void 0:i,conversationIds:u,conversationIdsMap:d})}));t.default=I,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(m,"deleteConversationRequested","/workspace/src/reducers/conversation/delete.js"),w.register(S,"deleteConversationSucceeded","/workspace/src/reducers/conversation/delete.js"),w.register(_,"deleteConversationRequestedSaga","/workspace/src/reducers/conversation/delete.js"),w.register(b,"watchDelete","/workspace/src/reducers/conversation/delete.js"),w.register(I,"default","/workspace/src/reducers/conversation/delete.js")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)}).call(this,r("YuTi")(e))},"ob+S":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=c(r("14Xm"));t.showFaqHistory=f;var s,n=c(r("jtha")),o=r("5rFJ"),d=r("WNYn");function c(e){return e&&e.__esModule?e:{default:e}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);var u,i,l=a.default.mark(f);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function f(e){var t,r,s,c,u=e.payload,i=u.ids,f=u.id;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.select)(d.currentConversationSelector);case 3:return t=e.sent,r=t.shop_id,e.next=7,(0,o.call)(n.default,{parent:"conversation",resource:"messages",params:{ids:"["+i.join(",")+"]",shop_id:r}});case 7:return s=e.sent,c=s.messages,e.abrupt("return",{id:f,messages:c});case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{id:f,error:!0});case 15:case"end":return e.stop()}}),l,this,[[0,12]])}(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(f,"showFaqHistory","/workspace/src/reducers/faqHistory/show.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},"osg/":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.removeAllDraft=t.removeSingleDraft=void 0;var a,s,n=c(r("YEIV")),o=c(r("QbLZ")),d=r("6SzI");function c(e){return e&&e.__esModule?e:{default:e}}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&s(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=(0,d.createActions)({REMOVE_SINGLE_DRAFT:function(e){return{conversationId:e.conversationId}},REMOVE_ALL_DRAFT:function(){return{}}}),i=u.removeSingleDraft,l=u.removeAllDraft;t.removeSingleDraft=i,t.removeAllDraft=l;var f,p,v=(a={},(0,n.default)(a,i,(function(e,t){var r=t.payload.conversationId,a=(0,o.default)({},e.draftHash);return delete a[r],(0,o.default)({},e,{draftHash:a})})),(0,n.default)(a,l,(function(e){return(0,o.default)({},e,{draftHash:{}})})),a);t.default=v,(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(i,"removeSingleDraft","/workspace/src/reducers/draft/remove.js"),f.register(l,"removeAllDraft","/workspace/src/reducers/draft/remove.js"),f.register(v,"default","/workspace/src/reducers/draft/remove.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,r("YuTi")(e))},ryDM:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("mzZX");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c,u,i=(0,s.default)({},o.deleteConversationSucceeded,(function(e,t){var r=t.payload.conversationId,a=e.messageIdsHash;return delete a[r],(0,n.default)({},e,{messageIdsHash:(0,n.default)({},a)})}));t.default=i,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(i,"default","/workspace/src/reducers/message/delete.js"),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}).call(this,r("YuTi")(e))},tjUo:function(e,t,r){"use strict";(function(e){var t=m(r("q1tI")),a=m(r("i8i4")),s=r("/MKj"),n=r("9kay"),o=m(r("kiXb")),d=r("0cfB"),c=r("mhGz"),u=r("wNa6"),i=m(r("8cBu"));r("p2bk");var l,f=r("WN6i"),p=r("Vt/u"),v=r("2AY/"),g=r("zd/2"),h=r("xcHk");function m(e){return e&&e.__esModule?e:{default:e}}(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&l(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;(0,f.initSentry)();var S,_,b=function(e,r){a.default.render(t.default.createElement(d.AppContainer,null,t.default.createElement(n.I18nextProvider,{i18n:o.default},t.default.createElement(s.Provider,{store:u.store},t.default.createElement(c.PersistGate,{persistor:u.persistor,loading:null},t.default.createElement(e,null))))),document.getElementById(r))},w=(0,p.getChatSource)(),M=function(e){return"position: fixed; right: "+(w?16:8)+"px; bottom: "+(w?(e?64:0)+16:0)+"px; z-index: 99999"},I={create:function(e){var t=void 0,r=void 0,a=document.getElementById(e);w&&(t=(((r=(window.SellerFramework?window.SellerFramework.app:window.dev)||{}).componentData||{}).FixBottomCard||{}).isFixed,r.on&&r.on("FixBottomCardChange",(function(e){a.style=M(e)}))),a||((a=document.createElement("div")).setAttribute("id",e),a.style=M(t),document.body.appendChild(a)),window.miniChatContainerId=e,b(i.default,e)},startOrderChat:function(e,t,r){u.store.dispatch((0,v.redirectConversationRequested)({userId:t,shopId:e,orderId:r}))},startChatWithText:function(e,t){u.store.dispatch((0,v.redirectConversationRequested)({userId:e,message:t}))},startChat:function(e,t,r){u.store.dispatch((0,v.redirectConversationRequested)({userId:t,shopId:e,productId:r}))},minimizeChatWindow:function(){u.store.dispatch((0,h.updateChatWindowStatus)({shouldShowWindow:!1}))},updateLoginStatus:function(){u.store.dispatch((0,g.loginRequested)())},logout:function(){u.store.dispatch((0,g.forceLogoutRequested)())}};window.ChatEasy=I,"function"==typeof window.chatReady&&window.chatReady(),I.create("shopee-mini-chat-embedded"),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(b,"render","/workspace/src/index.js"),S.register(w,"isScChat","/workspace/src/index.js"),S.register(M,"getMinichatDomStyle","/workspace/src/index.js"),S.register(I,"Chat","/workspace/src/index.js")),(_="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&_(e)}).call(this,r("YuTi")(e))},tpro:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateEntities=void 0;var a,s=u(r("YEIV")),n=u(r("QbLZ")),o=u(r("sk9p")),d=u(r("oF3Q")),c=r("6SzI");function u(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i=(0,c.createActions)({UPDATE_ENTITIES:function(e){return{entities:e.entities}}}).updateEntities;t.updateEntities=i;var l,f,p=(0,s.default)({},i,(function(e,t){var r=t.payload.entities;return(0,d.default)(r).reduce((function(e,t){var r=(0,o.default)(t,2),a=r[0],d=r[1];return"persist"!==a?(0,n.default)({},e,(0,s.default)({},a,(0,n.default)({},e[a],d))):(0,n.default)({},e,(0,s.default)({},a,d))}),e)}));t.default=p,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(i,"updateEntities","/workspace/src/reducers/entity/entity.js"),l.register(p,"default","/workspace/src/reducers/entity/entity.js")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,r("YuTi")(e))},twjD:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.changeConversationStatusRequested=void 0;var a=i(r("14Xm")),s=i(r("gDS+"));t.changeConversationStatusRequestedSaga=h,t.watchChangeStatus=m;var n,o=r("6SzI"),d=r("5rFJ"),c=i(r("jtha")),u=r("ZGUL");function i(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var l,f,p=a.default.mark(h),v=a.default.mark(m),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,o.createActions)({CHANGE_CONVERSATION_STATUS_REQUESTED:function(e){return{conversationId:e.conversationId,shopId:e.shopId,status:e.status}}}).changeConversationStatusRequested);function h(e){var t=e.payload,r=t.conversationId,n=t.shopId,o=t.status;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.call)(c.default,{method:"PUT",resource:"conversations",id:r,suffix:"status",payload:(0,s.default)({shop_id:n,status:o})});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,(0,d.put)((0,u.showOperationFailureToastRequested)({error:e.t0}));case 9:case"end":return e.stop()}}),p,this,[[0,5]])}function m(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeEvery)(g,h);case 2:case"end":return e.stop()}}),v,this)}t.changeConversationStatusRequested=g,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(g,"changeConversationStatusRequested","/workspace/src/reducers/conversation/status.js"),l.register(h,"changeConversationStatusRequestedSaga","/workspace/src/reducers/conversation/status.js"),l.register(m,"watchChangeStatus","/workspace/src/reducers/conversation/status.js")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,r("YuTi")(e))},vack:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.updateConversationFilter=void 0;var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("6SzI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c=(0,o.createActions)({UPDATE_CONVERSATION_FILTER:function(e){return{filter:e.filter}}}).updateConversationFilter;t.updateConversationFilter=c;var u,i,l=(0,s.default)({},c,(function(e,t){var r=t.payload.filter;return(0,n.default)({},e,{filter:r})}));t.default=l,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(c,"updateConversationFilter","/workspace/src/reducers/conversation/filter.js"),u.register(l,"default","/workspace/src/reducers/conversation/filter.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},vqUA:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.resetConversationQueue=t.resetOldConversationQueue=t.resetNewConversationQueue=t.updateNewMessageFlag=t.receiveMessageSucceeded=t.receiveMessageRequested=void 0;var a,s=L(r("YEIV")),n=L(r("jWXv")),o=L(r("rfXi")),d=L(r("FyfS")),c=L(r("14Xm")),u=L(r("QbLZ"));t.watchNewConversationMessageQueue=J,t.watchOldConversationMessageQueue=K,t.handleCurrentConversationChange=ee,t.watchReceive=te;var i,l=r("6SzI"),f=r("5rFJ"),p=r("763i"),v=r("tpro"),g=r("bqMa"),h=r("8Ryq"),m=r("kXhk"),S=r("0VV5"),_=r("8TFP"),b=r("WNYn"),w=L(r("rN3q")),M=r("XnKn"),I=r("r2BC"),k=r("1tZ5"),x=r("9jhx"),y=r("4fYm"),E=r("Wbyf");function L(e){return e&&e.__esModule?e:{default:e}}(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&i(e);var G=c.default.mark(z),H=c.default.mark(Z),R=c.default.mark(J),T=c.default.mark(K),C=c.default.mark(ee),j=c.default.mark(te),q=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,M.MessageTypes.MSG_TYPE_OFFER),F=(0,l.createActions)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},UPDATE_NEW_MESSAGE_FLAG:function(e){return{flag:e.flag}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),A=F.receiveMessageRequested,O=F.receiveMessageSucceeded,N=F.updateNewMessageFlag,D=F.resetNewConversationQueue,U=F.resetOldConversationQueue,P=F.resetConversationQueue;t.receiveMessageRequested=A,t.receiveMessageSucceeded=O,t.updateNewMessageFlag=N,t.resetNewConversationQueue=D,t.resetOldConversationQueue=U,t.resetConversationQueue=P;var Y=2e3,Q=8e3,V=Y,B=Y,X=[],W=[];function z(e){var t,r,a,s,n,o,d,i;return c.default.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.content,r=e.conversation_id,s=(a=t||{}).offer_id,n=a.model_id,o=a.product_id,d=[],i={},c.next=6,(0,f.select)((0,m.relatedOfferIdsSelector)(r,n,s,o));case 6:return c.sent.forEach((function(e){var t=e.id;i[t]=(0,u.default)({},e,{status:"cancelled"})})),d.push((0,f.put)((0,p.batchUpdateRecord)({name:"offers",records:i}))),c.next=11,(0,f.all)(d);case 11:case"end":return c.stop()}}),G,this)}function Z(e){var t,r,a,s,n,o,i,l,m,M,x,L,G,R,T,C,j,F,A,N,D,U,P,Y,Q,V,B,Z,J,K,$,ee,te,re,ae,se,ne,oe,de=e.payload.message;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=de.id,r=de.type,a=de.request_id,s=de.to_shop_id,n=de.conversation_id,o=de.send_by_yourself,i=de.content,l=de.created_at,e.next=3,(0,f.select)(_.isSubAccountSelector);case 3:return m=e.sent,e.next=6,(0,f.select)((function(e){return e.conversationReducer}));case 6:return M=e.sent,x=M.conversationIdsMap,L=M.currentConversationId,G=M.currentConversationCanRead,e.next=12,(0,f.select)((0,b.getConversation)(n));case 12:if(R=e.sent,T=R.id&&void 0!==R.faking,!!(x&&x[n.toString()]||T)){e.next=19;break}X.push(de),e.next=115;break;case 19:if(!(r===q)){e.next=23;break}return e.next=23,(0,f.call)(z,de);case 23:if(C=L===n,j=(0,E.getChatBotParams)(de,{updateMaxGeneralOptionHideTime:o}),!C){e.next=114;break}if(!o){e.next=85;break}return e.next=29,(0,f.select)(S.messagesWithSourceSelector);case 29:F=e.sent,A=!1,N=!1,D=!1,U=!0,P=!1,Y=void 0,e.prev=36,Q=(0,d.default)(F);case 38:if(U=(V=Q.next()).done){e.next=49;break}if(B=V.value,Z=B.id,J=B.retryRequestId,N=Z===a,D=J===a,!((A=Z===t)||N||D)){e.next=46;break}return e.abrupt("break",49);case 46:U=!0,e.next=38;break;case 49:e.next=55;break;case 51:e.prev=51,e.t0=e.catch(36),P=!0,Y=e.t0;case 55:e.prev=55,e.prev=56,!U&&Q.return&&Q.return();case 58:if(e.prev=58,!P){e.next=61;break}throw Y;case 61:return e.finish(58);case 62:return e.finish(55);case 63:if(!A){e.next=65;break}return e.abrupt("return");case 65:if(!N&&!D){e.next=70;break}return e.next=68,(0,f.call)(g.handleSendSucceededMessages,[de],n);case 68:e.next=83;break;case 70:return e.next=72,(0,f.select)(_.currentUserSelector)||{};case 72:return K=e.sent,$=K.shop_id,e.next=76,(0,f.call)(I.populateMessageWithSourceAndContent,[de],$,m);case 76:return ee=(0,w.default)("messages",de),e.next=79,(0,f.put)((0,v.updateEntities)({entities:ee.entities}));case 79:return e.next=81,(0,f.put)((0,p.updateRecord)({name:"conversations",id:n,record:(0,u.default)({latest_message_id:t,latest_message_type:r,latest_message_content:i,last_message_time:l,latestMessage:{},latestMessageStatus:""},j)}));case 81:return e.next=83,(0,f.put)(O({conversationId:n,message:de}));case 83:e.next=106;break;case 85:return e.next=87,(0,f.select)(_.currentUserSelector)||{};case 87:return te=e.sent,re=te.shop_id,e.next=91,(0,f.select)(b.currentConversationSelector);case 91:return ae=e.sent,e.next=94,(0,f.call)(I.populateMessageWithSourceAndContent,[de],re,m);case 94:return se=(0,w.default)("messages",de),e.next=97,(0,f.put)((0,v.updateEntities)({entities:se.entities}));case 97:if(ne=ae.unread_count,oe=G?ne:ne+1,0!==ne||G){e.next=102;break}return e.next=102,(0,f.put)((0,k.syncUnreadCount)({totalShop:{num:1},action:"increase"}));case 102:return e.next=104,(0,f.put)((0,p.updateRecord)({name:"conversations",id:n,record:(0,u.default)({latest_message_id:t,latest_message_type:r,latest_message_content:i,last_message_time:l,unread_count:oe,latestMessage:{},latestMessageStatus:""},j)}));case 104:return e.next=106,(0,f.put)(O({conversationId:n,message:de}));case 106:if(!T){e.next=112;break}return e.next=109,(0,f.put)((0,h.fetchConversationsRequested)({direction:"latest"}));case 109:if(o||!G){e.next=112;break}return e.next=112,(0,f.put)((0,y.markMessagesRequested)({conversationId:n,isRead:!0,latestMessageId:t,shopId:s}));case 112:e.next=115;break;case 114:W.push(de);case 115:case"end":return e.stop()}}),H,this,[[36,51,55,63],[56,,58,62]])}function J(){var e,t,r;return c.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,(0,f.delay)(V);case 3:if(e=X.length){a.next=8;break}V=V===Q?V:2*V,a.next=21;break;case 8:return t=X.splice(0,e).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),V=Y,a.next=12,(0,f.select)((function(e){return e.conversationReducer}));case 12:if(r=a.sent,!(r.latestTimestamp<=t[0].created_timestamp)){a.next=21;break}return a.next=17,(0,f.put)((0,h.fetchConversationsRequested)({direction:"latest"}));case 17:return a.next=19,(0,f.take)(h.fetchConversationsSucceeded);case 19:return a.next=21,(0,f.put)((0,x.refreshTotalUnreadConversationsCount)({}));case 21:a.next=0;break;case 23:case"end":return a.stop()}}),R,this)}function K(){var e,t=this;return c.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,(0,f.delay)(B);case 3:if(e=W.length){r.next=8;break}B=B===Q?B:2*B,r.next=9;break;case 8:return r.delegateYield(c.default.mark((function r(){var a,s,d,i,l;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.put)((0,h.updateFetchConversationsDirection)({direction:"latest"}));case 2:return a=W.splice(0,e),B=Y,s=(0,o.default)(new n.default(a.map((function(e){return e.conversation_id})))),t.next=7,(0,f.select)((0,b.getConversations)(s));case 7:return d=t.sent,i={},l=0,a.forEach((function(e){var t=e.id,r=e.type,a=e.content,s=e.created_at,n=e.conversation_id,o=e.send_by_yourself,c=(0,E.getChatBotParams)(e,{updateMaxGeneralOptionHideTime:o}),f=(0,u.default)({latest_message_id:t,latest_message_type:r,latest_message_content:a,last_message_time:s},c),p=i[n];if(p)t>p.latest_message_id?i[n]=(0,u.default)({},p,f,{unread_count:o?p.unread_count:p.unread_count+1}):i[n]=(0,u.default)({},p,{unread_count:o?p.unread_count:p.unread_count+1});else{var v=(d.find((function(e){return e.id===n}))||{}).unread_count,g=void 0===v?0:v;i[n]=(0,u.default)({},f,{latestMessage:{},latestMessageStatus:"",unread_count:o?g:g+1}),o||0!==g||(l+=1)}})),t.next=13,(0,f.put)((0,p.batchUpdateRecord)({name:"conversations",records:i,checkProp:"latest_message_id"}));case 13:return t.next=15,(0,f.put)((0,k.syncUnreadCount)({totalShop:{num:l},action:"increase"}));case 15:case"end":return t.stop()}}),r,t)}))(),"t0",9);case 9:r.next=0;break;case 11:case"end":return r.stop()}}),T,this)}function $(){var e=X.length,t=W.length;e&&X.splice(0,e),t&&W.splice(0,t)}function ee(e){var t,r,a,s,n,o,d,i,l,v;return c.default.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!(t=W.filter((function(t){return t.conversation_id===e}))).length){c.next=11;break}return t.forEach((function(e){var t=W.findIndex((function(t){return t.id===e.id}));W.splice(t,1)})),r=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),a=r[0],s=a.id,n=a.type,o=a.content,d=a.created_at,i=a.send_by_yourself,l=(0,E.getChatBotParams)(a,{updateMaxGeneralOptionHideTime:i}),v=(0,u.default)({latest_message_id:s,latest_message_type:n,latest_message_content:o,last_message_time:d,latestMessage:{},latestMessageStatus:""},l),c.next=10,(0,f.put)((0,p.updateRecord)({name:"conversations",id:e,record:v}));case 10:return c.abrupt("return",s);case 11:return c.abrupt("return",null);case 12:case"end":return c.stop()}}),C,this)}function te(){return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.takeEvery)(A,Z);case 2:return e.next=4,(0,f.takeEvery)(P,$);case 4:case"end":return e.stop()}}),j,this)}var re,ae,se=(a={},(0,s.default)(a,O,(function(e,t){var r=t.payload,a=r.conversationId,n=r.message,o=n.id,d=n.request_id,c=e.messageIdsHash,i=c[a]||{},l=i.all||[],f=i.sending||[],p=[];p=l.includes(o)?l:[o].concat(l).filter((function(e){return e!==d}));var v=l[l.length-1]||o;return(0,u.default)({},e,{messageIdsHash:(0,u.default)({},c,(0,s.default)({},a,(0,u.default)({},i,{offset:v,all:p,sending:f.filter((function(e){return!f.includes(d)}))})))})})),(0,s.default)(a,N,(function(e,t){var r=t.payload.flag;return(0,u.default)({},e,{newMessageFlag:r})})),a);t.default=se,(re="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(re.register(q,"MSG_TYPE_OFFER","/workspace/src/reducers/message/receive.js"),re.register(A,"receiveMessageRequested","/workspace/src/reducers/message/receive.js"),re.register(O,"receiveMessageSucceeded","/workspace/src/reducers/message/receive.js"),re.register(N,"updateNewMessageFlag","/workspace/src/reducers/message/receive.js"),re.register(D,"resetNewConversationQueue","/workspace/src/reducers/message/receive.js"),re.register(U,"resetOldConversationQueue","/workspace/src/reducers/message/receive.js"),re.register(P,"resetConversationQueue","/workspace/src/reducers/message/receive.js"),re.register(Y,"BASE_DELAY_TIME","/workspace/src/reducers/message/receive.js"),re.register(Q,"MAX_DELAY_TIME","/workspace/src/reducers/message/receive.js"),re.register(V,"_newConversationDelayTime","/workspace/src/reducers/message/receive.js"),re.register(B,"_oldConversationDelayTime","/workspace/src/reducers/message/receive.js"),re.register(X,"_newConversationMessageQueue","/workspace/src/reducers/message/receive.js"),re.register(W,"_oldConversationMessageQueue","/workspace/src/reducers/message/receive.js"),re.register(z,"handleOfferMessages","/workspace/src/reducers/message/receive.js"),re.register(Z,"receiveMessage","/workspace/src/reducers/message/receive.js"),re.register(J,"watchNewConversationMessageQueue","/workspace/src/reducers/message/receive.js"),re.register(K,"watchOldConversationMessageQueue","/workspace/src/reducers/message/receive.js"),re.register($,"resetQueue","/workspace/src/reducers/message/receive.js"),re.register(ee,"handleCurrentConversationChange","/workspace/src/reducers/message/receive.js"),re.register(te,"watchReceive","/workspace/src/reducers/message/receive.js"),re.register(se,"default","/workspace/src/reducers/message/receive.js")),(ae="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&ae(e)}).call(this,r("YuTi")(e))},wTcQ:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setCurrentGroupId=t.setCurrentGroupType=t.fetchMessageShortcutsGroupSucceeded=t.updateFetchMessageShortcutsGroupStatus=t.fetchMessageShortcutsGroupRequested=void 0;var a,s=f(r("YEIV")),n=f(r("QbLZ")),o=f(r("14Xm"));t.watchFetch=M;var d,c=r("6SzI"),u=r("5rFJ"),i=f(r("jtha")),l=f(r("b/qR"));function f(e){return e&&e.__esModule?e:{default:e}}(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&d(e);var p=o.default.mark(w),v=o.default.mark(M),g=("undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(0,c.createActions)({FETCH_MESSAGE_SHORTCUTS_GROUP_REQUESTED:function(e){var t=e.shopId,r=e.groupType;return{shopId:t,groupType:void 0===r?1:r}},UPDATE_FETCH_MESSAGE_SHORTCUTS_GROUP_STATUS:function(e){return{groupType:e.groupType,status:e.status}},FETCH_MESSAGE_SHORTCUTS_GROUP_SUCCEEDED:function(e){return{groupType:e.groupType,groups:e.groups,status:e.status}},SET_CURRENT_GROUP_TYPE:function(e){return{currentGroupType:e.currentGroupType}},SET_CURRENT_GROUP_ID:function(e){return{groupType:e.groupType,currentGroupId:e.currentGroupId}}})),h=g.fetchMessageShortcutsGroupRequested,m=g.updateFetchMessageShortcutsGroupStatus,S=g.fetchMessageShortcutsGroupSucceeded,_=g.setCurrentGroupType,b=g.setCurrentGroupId;function w(e){var t,r,a,s,n=e.payload,d=n.shopId,c=n.groupType;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.put)(m({groupType:c,status:l.default.INIT_PENDING}));case 3:return e.next=5,(0,i.default)({version:"v1.2",parent:"message_shortcuts",resource:"groups",params:{shop_id:d,group_type:c}});case 5:return t=e.sent,r=t.groups,a=(void 0===r?[]:r).filter((function(e){return"enabled"===e.state})),e.next=11,(0,u.put)(S({groupType:c,groups:a,status:l.default.SUCCEED}));case 11:if(!(s=a?a[0]:null)){e.next=15;break}return e.next=15,(0,u.put)(b({groupType:c,currentGroupId:s.id}));case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,(0,u.put)(m({groupType:c,status:l.default.INIT_FAILED}));case 21:case"end":return e.stop()}}),p,this,[[0,17]])}function M(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeEvery)(h,w);case 2:case"end":return e.stop()}}),v,this)}t.fetchMessageShortcutsGroupRequested=h,t.updateFetchMessageShortcutsGroupStatus=m,t.fetchMessageShortcutsGroupSucceeded=S,t.setCurrentGroupType=_,t.setCurrentGroupId=b;var I,k,x=(a={},(0,s.default)(a,S,(function(e,t){var r=t.payload,a=r.groupType,o=r.groups,d=r.status;return(0,n.default)({},e,(0,s.default)({},a,{groups:o,status:d}))})),(0,s.default)(a,m,(function(e,t){var r=t.payload,a=r.groupType,o=r.status,d=e[a];return(0,n.default)({},e,(0,s.default)({},a,(0,n.default)({},d,{status:o})))})),(0,s.default)(a,_,(function(e,t){var r=t.payload.currentGroupType;return(0,n.default)({},e,{currentGroupType:r})})),(0,s.default)(a,b,(function(e,t){var r=t.payload,a=r.groupType,o=r.currentGroupId,d=e[a];return(0,n.default)({},e,(0,s.default)({},a,(0,n.default)({},d,{currentGroupId:o})))})),a);t.default=x,(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(h,"fetchMessageShortcutsGroupRequested","/workspace/src/reducers/messageShortcutGroup/fetch.js"),I.register(m,"updateFetchMessageShortcutsGroupStatus","/workspace/src/reducers/messageShortcutGroup/fetch.js"),I.register(S,"fetchMessageShortcutsGroupSucceeded","/workspace/src/reducers/messageShortcutGroup/fetch.js"),I.register(_,"setCurrentGroupType","/workspace/src/reducers/messageShortcutGroup/fetch.js"),I.register(b,"setCurrentGroupId","/workspace/src/reducers/messageShortcutGroup/fetch.js"),I.register(w,"fetchMessageShorcutsGroupSagas","/workspace/src/reducers/messageShortcutGroup/fetch.js"),I.register(M,"watchFetch","/workspace/src/reducers/messageShortcutGroup/fetch.js"),I.register(x,"default","/workspace/src/reducers/messageShortcutGroup/fetch.js")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)}).call(this,r("YuTi")(e))},wgPM:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setCurrentConversationCanRead=void 0;var a,s=d(r("YEIV")),n=d(r("QbLZ")),o=r("6SzI");function d(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var c=(0,o.createActions)({SET_CURRENT_CONVERSATION_CAN_READ:function(e){return{canRead:e.canRead}}}).setCurrentConversationCanRead;t.setCurrentConversationCanRead=c;var u,i,l=(0,s.default)({},c,(function(e,t){var r=t.payload.canRead;return(0,n.default)({},e,{currentConversationCanRead:r})}));t.default=l,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(c,"setCurrentConversationCanRead","/workspace/src/reducers/conversation/set.js"),u.register(l,"default","/workspace/src/reducers/conversation/set.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))},wyum:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.evaluationRequested=void 0;var a=v(r("gDS+")),s=v(r("14Xm"));t.showMyRateCard=_,t.showRateCard=b,t.watchEvaluation=x;var n,o=r("6SzI"),d=v(r("jtha")),c=r("5rFJ"),u=r("3atR"),i=r("Tz2t"),l=r("8TFP"),f=r("763i"),p=r("ZGUL");function v(e){return e&&e.__esModule?e:{default:e}}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var g=s.default.mark(_),h=s.default.mark(b),m=s.default.mark(k),S=s.default.mark(x);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function _(e,t,r){var a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.select)((0,i.rateCardSelector)(t));case 3:if((a=e.sent)&&"failed"!==a.fetchStatus&&a.status!==u.EvaluationStatus.Unrated){e.next=8;break}return e.next=7,(0,c.call)(d.default,{parent:"rating_cards",parentId:t,resource:"get",params:r});case 7:a=e.sent;case 8:return e.abrupt("return",a);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{id:t,fetchStatus:"failed"});case 14:case"end":return e.stop()}}),g,this,[[0,11]])}function b(e){var t,r,a,n,o,u,i,f=e.ids,p=e.shopId;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.isArray(f)?f:[f],r={},"0"!==p&&(r.shop_id=p),e.next=5,(0,c.select)(l.isSubAccountSelector);case 5:return a=e.sent,e.next=8,(0,c.select)(l.currentUserShopIdSelector);case 8:if(e.sent===parseInt(p)||a){e.next=18;break}return n=[],t.forEach((function(e){return n.push((0,c.call)(_,p,e,r))})),e.next=14,(0,c.all)(n);case 14:return o=e.sent,e.abrupt("return",o);case 18:return e.prev=18,u="rating_cards",r.ids="["+t.join(",")+"]",e.next=23,(0,c.call)(d.default,{resource:u,params:r});case 23:return i=e.sent,e.abrupt("return",i[u]||[]);case 27:return e.prev=27,e.t0=e.catch(18),e.abrupt("return",[]);case 30:case"end":return e.stop()}}),h,this,[[18,27]])}var w,M,I=(0,o.createActions)({EVALUATION_REQUESTED:function(e){var t=e.id,r=e.shopId,a=e.grade,s=e.reason;return{id:t,shopId:r,grade:a,reason:void 0===s?[]:s}}}).evaluationRequested;function k(e){var t,r,n,o=e.payload,i=o.id,l=o.shopId,v=o.grade,g=o.reason;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={grade:v,reason:g},l&&(t.shop_id=l),e.next=5,(0,c.call)(d.default,{method:"PUT",parent:"rating_cards",parentId:i,resource:"evaluate",payload:(0,a.default)(t)});case 5:return e.next=7,(0,c.put)((0,f.updateRecord)({name:"rateCards",id:i,record:{grade:v,status:u.EvaluationStatus.Rated}}));case 7:e.next=17;break;case 9:return e.prev=9,e.t0=e.catch(0),r=Math.random(),e.t0.message&&e.t0.message.error_code&&((n=e.t0.message.error_code)===u.EvaluationErrorCode.Rated&&(r=u.EvaluationStatus.Rated),n===u.EvaluationErrorCode.Expired&&(r=u.EvaluationStatus.Expired)),e.next=15,(0,c.put)((0,f.updateRecord)({name:"rateCards",id:i,record:{status:r}}));case 15:return e.next=17,(0,c.put)((0,p.showOperationFailureToastRequested)({error:e.t0}));case 17:case"end":return e.stop()}}),m,this,[[0,9]])}function x(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.takeLatest)(I,k);case 2:case"end":return e.stop()}}),S,this)}t.evaluationRequested=I,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(_,"showMyRateCard","/workspace/src/reducers/message/evaluation.js"),w.register(b,"showRateCard","/workspace/src/reducers/message/evaluation.js"),w.register(I,"evaluationRequested","/workspace/src/reducers/message/evaluation.js"),w.register(k,"evaluationSaga","/workspace/src/reducers/message/evaluation.js"),w.register(x,"watchEvaluation","/workspace/src/reducers/message/evaluation.js")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)}).call(this,r("YuTi")(e))},y8ld:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a,s=c(r("QbLZ")),n=r("6SzI"),o=c(r("0O3H")),d=c(r("osg/"));function c(e){return e&&e.__esModule?e:{default:e}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,i,l=(0,n.handleActions)((0,s.default)({},o.default,d.default),{draftHash:{}});t.default=l,(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(l,"default","/workspace/src/reducers/draft/index.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r("YuTi")(e))}}]);
//# sourceMappingURL=app~970f9218.6c1dc617b7d9e2833980.js.map