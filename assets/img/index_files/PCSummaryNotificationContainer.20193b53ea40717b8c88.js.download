(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[140],{1127:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(0),i=n(199),c=n(117),o=n(200),r=n(201),s=n(225),l=n(322);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function m(e,t,n){var m=a.useRef(!0),f=Object(i.b)(),d=Object(c.c)(),b=Object(c.d)(),p=a.useState(null),v=p[0],g=p[1],C=a.useRef();return a.useEffect(function(){return m.current=!0,function(){m.current=!1}},[m]),a.useEffect(function(){C.current=function(){var n=Object(c.b)(b,e||"-1"),a=u({},Object(r.a)(d),Object(r.a)(t));Object(l.a)(n,{targetData:Object(o.b)(a)}),Object(l.b)(f,n)}},[C,f,d,b,t,e]),a.useEffect(function(){if(v)return Object(s.a)(v,function(){C.current&&C.current(),Object(s.b)(v)}),function(){Object(s.b)(v)}},[C,v].concat(n)),a.useCallback(function(e){m.current&&g(e)},[m,g])}},2908:function(e,t,n){e.exports={contentContainer:"_2TMqNf",container:"_1gIfEe",buttonsContainer:"_14FTJA",contentImg:"O8hciL",contentTxt:"_2EmG1E",buttonSignup:"_3L0vna",buttonLogin:"HiMqXW"}},2909:function(e,t,n){e.exports=n.p+"5a83ec8ec1bc1ea687fdf9c6e68eee0b.png"},2910:function(e,t,n){e.exports={container:"_3GVdQ7",imageContainer:"_2-CXwM",contentContainer:"_35NzJf",title:"_2Czip8",content:"_10k4T_"}},2911:function(e,t,n){e.exports={container:"_2dsZ4a",imageContainer:"_3aJ0E7",avatar:"_1kkn3L",imagePlaceholder:"_3hgl80",contentContainer:"jFaRXS",content:"_13a1Mn"}},2912:function(e,t,n){e.exports={notiListLabel:"_31mr3M",notiListLinkViewAll:"w-hMZP"}},2913:function(e,t,n){e.exports={container:"_2732tF"}},3445:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(52),c=n(230),o=n(1858),r=n(40),s=n(917),l=n(394),u=n(393),m=n(14),f=n(2908),d=n.n(f),b=n(2909),p=n.n(b),v=Object(r.withRouter)(function(e){var t=e.history;return a.createElement("div",{className:d.a.container},a.createElement("div",{className:d.a.contentContainer},a.createElement(s.a,{src:p.a,wrapperClassName:d.a.contentImg,className:d.a.contentImg,useImgTag:!0,hidePlaceholder:!0}),a.createElement("p",{className:d.a.contentTxt},Object(m.t)("label_noti_login_required"))),a.createElement("div",{className:d.a.buttonsContainer},a.createElement("button",{className:d.a.buttonSignup,onClick:function(){t.push(Object(u.a)(l.j.getUrl(),location.href))}},Object(m.t)("label_noti_signup")),a.createElement("button",{className:d.a.buttonLogin,onClick:function(){t.push(Object(u.a)(l.c.getUrl(),location.href))}},Object(m.t)("label_noti_login"))))}),g=n(386),C=n(162),_=n(1450),N=n(1127),E=n(313),y=n(2),O=n(229),j=n(2910),I=n.n(j),h={};var k=Object(i.connect)(function(e,t){var n=t.action;return{isUnread:C.e.isNotificationUnread(e,{notiId:n.action_id,notiType:y.k.ACTION,notiSubType:n.action_cate})}},{chatWithUser:m.actions.chatWithUser,markNotificationAsRead:C.c.markNotificationAsRead})(a.memo(function(e){var t=e.action,n=e.location,i=e.isUnread,c=e.markNotificationAsRead,o=t||h,r=o.images,s=o.title,l=o.content,u=o.rich_images,m=void 0===u?[]:u,f={action:t,location:n,isUnread:i},d=Object(N.a)("ActionCardSummary",f),b=Object(E.a)("ActionCardSummary",f);return a.createElement(_.b.Container,{className:I.a.container,onClick:function(e){e.preventDefault(),b(),i&&c({notiId:t.action_id,notiType:y.k.ACTION,notiSubType:t.action_cate}),O.a.handleClick(t)},isUnread:i,ref:d},a.createElement(_.b.ImageContainer,{className:I.a.imageContainer},a.createElement(_.c,{images:r})),a.createElement(_.b.ContentContainer,{className:I.a.contentContainer},a.createElement("div",{className:I.a.title},s),a.createElement("div",{className:I.a.content,dangerouslySetInnerHTML:{__html:l}}),m.length>0&&a.createElement(_.d,{images:m,isSummary:!0})))})),T=n(2911),L=n.n(T),S={};var A=Object(i.connect)(function(e,t){var n=t.activity;return{isUnread:C.e.isNotificationUnread(e,{notiId:n.activity_id,notiType:y.k.ACTIVITY,notiSubType:n.type}),userStore:e.user||S,itemStore:e.item||S}},{markNotificationAsRead:C.c.markNotificationAsRead})(a.memo(function(e){var t=e.activity,n=e.location,i=e.markNotificationAsRead,c=e.isUnread,o=e.itemStore,r=e.userStore,s=O.b.getUserAvatarImage(t,{userStore:r}),l=O.b.getDescription(t,{itemStore:o}),u={activity:t,location:n,isUnread:c},m=Object(N.a)("ActivityCardSummary",u),f=Object(E.a)("ActivityCardSummary",u);return a.createElement(_.b.Container,{className:L.a.container,isUnread:c,onClick:function(e){e.preventDefault(),f(),c&&i({notiId:t.activity_id,notiType:y.k.ACTIVITY,notiSubType:t.type}),O.b.handleClick(t)},ref:m},a.createElement(_.b.ImageContainer,{className:L.a.imageContainer},a.createElement(_.a,{avatarImage:s})),a.createElement(_.b.ContentContainer,{className:L.a.contentContainer},a.createElement("div",{className:L.a.content,dangerouslySetInnerHTML:{__html:l}})))})),w=n(1857),U=n(525),V=n(2912),R=n.n(V);var x=function(e){var t=e.notifications,n=Object(E.a)("NotificationListViewAllSummary");return a.createElement(a.Fragment,null,a.createElement("div",{className:R.a.notiListLabel},Object(m.t)("label_noti_recently_received")),a.createElement("div",{className:R.a.notiListContainer},t.map(function(e,t){var n=Object(U.a)(e);if(!n)return null;var i=n.notiType,c=i+"-"+n.notiId;switch(i){case y.k.ACTION:return a.createElement(k,{key:c,action:e,location:t});case y.k.ACTIVITY:return a.createElement(A,{key:c,activity:e,location:t});default:return null}})),a.createElement(g.a,{className:R.a.notiListLinkViewAll,to:w.a,onClick:n},Object(m.t)("label_noti_view_all")))},M=n(9),P=n(2913),J=n.n(P);var D={updateLastViewedNotification:c.b.updateLastViewedNotification};t.default=Object(i.connect)(function(e){return{progress:c.d.getAPIProgress(e),shouldUpdateLastViewedId:c.d.shouldUpdateLastViewedId(e)}},D)(function(e){var t=e.isLoggedIn,n=e.updateLastViewedNotification,i=e.shouldUpdateLastViewedId,c=e.notifications,r=e.progress;a.useEffect(function(){r!==M.b.INIT&&r!==M.b.REQ&&i&&n()},[r,i,n]);var s=Object(N.a)("NotificationContainerSummary"),l=c.length>0,u=a.createElement(o.a,null);return t?l||r!==M.b.INIT&&r!==M.b.REQ?l&&(u=a.createElement(x,{notifications:c})):u=a.createElement(o.b,null):u=a.createElement(v,null),a.createElement("div",{className:J.a.container,ref:s},u)})}}]);
//# sourceMappingURL=https://shopee.sg/assets/PCSummaryNotificationContainer.20193b53ea40717b8c88.js.map